<div #createModal></div>
<div class="modal-header">
  <h5 class="modal-title">Mis à jour des paramètres de connection</h5>
  <button type="button" class="close basic-close" data-dismiss="modal" aria-lab0el="Close" (click)="close()"><span
      aria-hidden="true">&times;</span></button>
</div>
<div class="modal-body">
  <form (ngSubmit)="checkPassword(userForm.value.pass)" #userForm="ngForm" autocomplete="off" *ngIf="!modify">
    <div class="text-center">
      <!-- <img class="rounded mb-3" src="assets/images/params/profil.jpg" width="35%" alt=""> -->
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="form-group">
          <label for="vdfd">Veuillez d'abord vous authentifier</label>
        </div>
      </div>
    </div>
    <div class="row" *ngIf="!modify">
      <div class="col-sm-6">
        <div class="form-group">
          <label for="df">Login Actuel</label>
          <input type="text" maxlength="50" id="login_profil" class="form-control pl-2" [(ngModel)]="item.login"
            name="login" placeholder="Login" required #login="ngModel" disabled>
          <small class="error_msg text-danger font-italic" *ngIf="login.dirty && login.hasError('required')">
            Login manquant</small>
        </div>
      </div>
      <div class="col-sm-6">
        <label for="df">Mot de Passe Actuel</label>
        <div class="input-group">
          <input type="password" name="pass" class="form-control" id="password" [(ngModel)]="code"
            placeholder="Mot de passe" #pass="ngModel" required autocomplete="off">
          <button type="button" class="btn btn-light" (click)="showHidePass()"><span *ngIf="!showPass"
              class="fas fa-eye-slash"></span><span *ngIf="showPass" class="fas fa-eye"></span></button>
          <small class="error_msg text-danger font-italic" *ngIf="pass.dirty && pass.hasError('required')">Mot
            de passe manquant</small>
        </div>
      </div>
    </div>
    <div class="app-modal-footer row">
      <button type="button" class="btn btn-light col-sm-6" data-dismiss="modal" (click)="close()"><i
          class="fa fa-times me-2 ms-n21"></i>&nbsp; Annuler</button>
      <button type="submit" class="btn btn-primary col-sm-6" [disabled]="!userForm.valid || show">
        <span *ngIf="!show"><i class="fa fa-save me-2 ms-n21"></i> Authentification</span><span *ngIf="show">Veuillez
          Patientez... &nbsp;</span>
        <span *ngIf="show" class="spinner-border" role="status" style="width: 1.3rem; height: 1.3rem;"></span>
      </button>
    </div>
  </form>
  <form (ngSubmit)="save(userForm.value)" #userForm="ngForm" autocomplete="off" *ngIf="modify">
    <div class="text-center">
      <!-- <img class="rounded mb-3" src="assets/images/params/profil.jpg" width="35%" alt=""> -->
    </div>
    <div class="row d-flex justify-content-center">
      <div class="col-sm-10">
        <div class="form-group">
          <label for="df">Nouveau Login</label>
          <input type="text" maxlength="50" id="login_profil" class="form-control pl-2" [(ngModel)]="item.login"
            name="new_login" placeholder="Login" required #new_login="ngModel">
          <small class="error_msg text-danger font-italic" *ngIf="new_login.dirty && new_login.hasError('required')">
            Login invalide!</small>
        </div>
      </div>
    </div>
    <div class="row d-flex justify-content-center">
      <div class="col-sm-10">
        <label for="df">Nouveau Mot de Passe</label>
        <div class="input-group">
          <input type="password" maxlength="50" id="password" class="form-control" ngModel="" name="pass1"
            placeholder="Nouveau Mot de passe" required #pass1="ngModel">
          <button type="button" class="btn btn-light" (click)="showHidePass()"><span *ngIf="!showPass"
              class="fas fa-eye-slash"></span><span *ngIf="showPass" class="fas fa-eye"></span></button>
        </div>
        <small class="error_msg text-danger font-italic" *ngIf="pass1.dirty && pass1.hasError('required')">
          Mot de passe invalide</small>
      </div>
    </div>
    <div class="row pt-3 pb-2 d-flex justify-content-center">
      <div class="col-sm-10">
        <label for="pass2">Confirmez Votre Nouveau Mot de passe</label>
        <div class="input-group">
          <input type="password" maxlength="50" (keyup)="CheckSamePassword(userForm.value.pass1, userForm.value.pass2)"
            id="pass2" class="form-control" ngModel="" name="pass2" placeholder="Confirmez le nouveau mot de passe"
            required #pass2="ngModel">
          <button type="button" class="btn btn-light" (click)="showHidePassword()"><span *ngIf="!showPassword"
              class="fas fa-eye-slash"></span><span *ngIf="showPassword" class="fas fa-eye"></span></button>
        </div>
        <small class="error_msg text-danger font-italic" *ngIf="!samePassWord">Les mots de passe ne sont pas
          identiques!</small>
      </div>
    </div>

    <div class="app-modal-footer row pt-3">
      <button type="button" class="btn btn-light col-sm-6" data-dismiss="modal" (click)="close()"><i
          class="fa fa-times me-2 ms-n21"></i>&nbsp; Annuler</button>
      <button type="submit" class="btn btn-primary col-sm-6" [disabled]="!userForm.valid || show || !samePassWord">
        <span *ngIf="!show"><i class="fa fa-save me-2 ms-n21"></i> Enregistrer</span><span *ngIf="show">Veuillez
          Patientez... &nbsp;</span>
        <span *ngIf="show" class="spinner-border" role="status" style="width: 1.3rem; height: 1.3rem;"></span>
      </button>
    </div>
  </form>
</div>
