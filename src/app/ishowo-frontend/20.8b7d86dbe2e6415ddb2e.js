(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{Km9j:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{transform(e,t){var n="";if(null===e||null==e)return e;for(var r=new String(e).split("").reverse().join(""),a=0;a<r.length/3;a++)n+=" "+r.substring(3*a,3*a+3);return new String(n).split("").reverse().join("")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"formatMoney",type:e,pure:!0}),e})()},YzKJ:function(e,t,n){"use strict";n.r(t),n.d(t,"ProductSoldStatsModule",function(){return x});var r=n("ofXK"),a=n("njyG"),o=n("ebz3"),d=n("tyNb"),i=n("vg+W"),l=n("fXoL"),m=n("0OH5"),s=n("TM25"),p=n("kwXE"),c=n("/n7v"),u=n("3Pt+"),S=n("bFKe"),h=n("vohr"),f=n("Km9j");function g(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td",22),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td",22),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td",23),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"formatMoney"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n+1),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.product.product.name," / ",e.product.measure_type.name,""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](7,4,e.quantity),"")}}function E(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td",22),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td",22),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td",23),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"formatMoney"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n+1),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.product.product.name," / ",e.product.measure_type.name,""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](7,4,e.quantity),"")}}function y(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td",22),l["\u0275\u0275text"](2),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"td",22),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"td",23),l["\u0275\u0275text"](6),l["\u0275\u0275pipe"](7,"formatMoney"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n+1),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",e.product.product.name," / ",e.product.measure_type.name,""),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](7,4,e.quantity),"")}}const v=[{path:"",component:(()=>{class e{constructor(e,t,n,r){this.statsService=e,this.productService=t,this.locStorService=n,this.route=r,this.DefaultDateOne=new Date,this.DefaultDateTwo=new Date,this.reportProdQty=[],this.reportProdCa=[],this.reportProdProfit=[],this.isLoadingStatsQty=!1,this.isLoadingStatsCa=!1,this.isLoadingStatsProfit=!1,this.param=new i.a,this.product_types=[],this.isLoadingStock=!1,this.productQtySearchName="",this.productCaSearchName="",this.productProfitSearchName=""}ngOnInit(){this.user=this.locStorService.getUser(),this.param.agent=this.user,this.param.startDate=this.DefaultDateOne,this.param.endDate=this.DefaultDateTwo,this.getProductsStats()}getProductsStats(){this.getStatsOnProductQtySoldByPeriod(),this.getStatsOnProductCaByPeriod(),this.getStatsOnProductProfitByPeriod()}getStatsOnProductQtySoldByPeriod(){this.isLoadingStatsQty=!0,this.reportProdQty=[],this.statsService.getProductSoldByQuantityStats(this.param).then(e=>{this.isLoadingStatsQty=!1,this.reportProdQty=e,null===this.reportProdQty&&(this.reportProdQty=[])},e=>{this.reportProdQty=[],this.isLoadingStatsQty=!1})}getStatsOnProductCaByPeriod(){this.isLoadingStatsCa=!0,this.reportProdCa=[],this.statsService.getProductSoldByCaStats(this.param).then(e=>{this.isLoadingStatsCa=!1,this.reportProdCa=e,null===this.reportProdCa&&(this.reportProdCa=[])},e=>{this.reportProdCa=[],this.isLoadingStatsCa=!1})}getStatsOnProductProfitByPeriod(){this.isLoadingStatsProfit=!0,this.reportProdProfit=[],this.statsService.getProductSoldByProfitStats(this.param).then(e=>{this.isLoadingStatsProfit=!1,this.reportProdProfit=e,null===this.reportProdProfit&&(this.reportProdProfit=[])},e=>{this.reportProdProfit=[],this.isLoadingStatsProfit=!1})}getSelectedDate1(e){let t=new Date(e);t.setHours(24,0,0,0),this.param.startDate=t}getSelectedDate2(e){let t=new Date(e);t.setHours(23,59,59,999),this.param.endDate=t}canGetStats(){return 1!=(null==this.param.product)}getProductSelectedName(){return null==this.param||null==this.param.product?"":this.param.product.product.name+"("+this.param.product.measure_type.name+")"}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](m.a),l["\u0275\u0275directiveInject"](s.a),l["\u0275\u0275directiveInject"](p.a),l["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-sold-stats"]],decls:91,vars:31,consts:[[3,"options","customHeader"],[1,"app-card-header"],["role","form"],["userForm","ngForm"],[1,"row"],[1,"form-group","mb-0","input-group","col-sm-4"],[1,"input-group-append"],[1,"btn","btn-primary","font-weight-bold","btn-sm"],["type","date","name","dateStart","id","dateStart",1,"pl-2","form-control",3,"ngModel","change","ngModelChange"],["dateStart","ngModel"],["type","date","name","dateEnd","id","dateEnd",1,"pl-2","form-control",3,"ngModel","change","ngModelChange"],["dateEnd","ngModel"],["type","submit",1,"col-sm-4"],[1,"btn","btn-primary","float-right",3,"click"],[1,"fa","fa-search"],[1,"col-sm-4"],["action",""],[1,"font-weight-bold","mr-2","text-c-blue"],["type","text","name","productSearchName","placeholder","Recherche Produit",1,"form-control",3,"ngModel","ngModelChange"],["productQtyName",""],[1,"table-responsive"],[1,"table"],[1,"text-left","p-0","pt-1","pl-1"],[1,"text-center","p-0","pt-1"],[4,"ngFor","ngForOf"],[1,"font-weight-bold","mr-2","text-c-green"],["productCaName",""],[1,"font-weight-bold","mr-2","text-c-yellow"],["productProfitName",""]],template:function(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"app-card",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"form",2,3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275elementStart"](6,"div",6),l["\u0275\u0275elementStart"](7,"button",7),l["\u0275\u0275text"](8,"DE"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"input",8,9),l["\u0275\u0275listener"]("change",function(){l["\u0275\u0275restoreView"](e);const n=l["\u0275\u0275reference"](3);return t.getSelectedDate1(n.value.dateStart)})("ngModelChange",function(e){return t.DefaultDateOne=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",5),l["\u0275\u0275elementStart"](12,"div",6),l["\u0275\u0275elementStart"](13,"button",7),l["\u0275\u0275text"](14,"\xc0"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"input",10,11),l["\u0275\u0275listener"]("change",function(){l["\u0275\u0275restoreView"](e);const n=l["\u0275\u0275reference"](3);return t.getSelectedDate2(n.value.dateEnd)})("ngModelChange",function(e){return t.DefaultDateTwo=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"div",12),l["\u0275\u0275elementStart"](18,"button",13),l["\u0275\u0275listener"]("click",function(){return t.getProductsStats()}),l["\u0275\u0275element"](19,"span",14),l["\u0275\u0275text"](20," Rechercher"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"div",4),l["\u0275\u0275elementStart"](22,"div",15),l["\u0275\u0275elementStart"](23,"app-card",0),l["\u0275\u0275elementStart"](24,"div",1),l["\u0275\u0275elementStart"](25,"form",16),l["\u0275\u0275elementStart"](26,"span",17),l["\u0275\u0275text"](27,"Les plus vendus par Quantit\xe9 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](28,"span"),l["\u0275\u0275elementStart"](29,"input",18,19),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.productQtySearchName=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](31,"div",20),l["\u0275\u0275elementStart"](32,"perfect-scrollbar"),l["\u0275\u0275elementStart"](33,"table",21),l["\u0275\u0275elementStart"](34,"thead"),l["\u0275\u0275elementStart"](35,"tr"),l["\u0275\u0275elementStart"](36,"th",22),l["\u0275\u0275text"](37,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"th",22),l["\u0275\u0275text"](39,"Nom"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](40,"th",23),l["\u0275\u0275text"](41,"Qte.Vendue"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](42,"tbody"),l["\u0275\u0275template"](43,g,8,6,"tr",24),l["\u0275\u0275pipe"](44,"stockView"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"div",15),l["\u0275\u0275elementStart"](46,"app-card",0),l["\u0275\u0275elementStart"](47,"div",1),l["\u0275\u0275elementStart"](48,"form",16),l["\u0275\u0275elementStart"](49,"span",25),l["\u0275\u0275text"](50,"Les plus vendus par Chiffre d'Affaires "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](51,"span"),l["\u0275\u0275elementStart"](52,"input",18,26),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.productCaSearchName=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](54,"div",20),l["\u0275\u0275elementStart"](55,"perfect-scrollbar"),l["\u0275\u0275elementStart"](56,"table",21),l["\u0275\u0275elementStart"](57,"thead"),l["\u0275\u0275elementStart"](58,"tr"),l["\u0275\u0275elementStart"](59,"th",22),l["\u0275\u0275text"](60,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](61,"th",22),l["\u0275\u0275text"](62,"Nom"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](63,"th",23),l["\u0275\u0275text"](64,"Qte.Vendue"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](65,"tbody"),l["\u0275\u0275template"](66,E,8,6,"tr",24),l["\u0275\u0275pipe"](67,"stockView"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](68,"div",15),l["\u0275\u0275elementStart"](69,"app-card",0),l["\u0275\u0275elementStart"](70,"div",1),l["\u0275\u0275elementStart"](71,"form",16),l["\u0275\u0275elementStart"](72,"span",27),l["\u0275\u0275text"](73,"Les plus vendus par B\xe9n\xe9fice "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](74,"span"),l["\u0275\u0275elementStart"](75,"input",18,28),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.productProfitSearchName=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](77,"div",20),l["\u0275\u0275elementStart"](78,"perfect-scrollbar"),l["\u0275\u0275elementStart"](79,"table",21),l["\u0275\u0275elementStart"](80,"thead"),l["\u0275\u0275elementStart"](81,"tr"),l["\u0275\u0275elementStart"](82,"th",22),l["\u0275\u0275text"](83,"#"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](84,"th",22),l["\u0275\u0275text"](85,"Nom"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](86,"th",23),l["\u0275\u0275text"](87,"Qte.Vendue"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](88,"tbody"),l["\u0275\u0275template"](89,y,8,6,"tr",24),l["\u0275\u0275pipe"](90,"stockView"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}2&e&&(l["\u0275\u0275property"]("options",!1)("customHeader",!0),l["\u0275\u0275advance"](9),l["\u0275\u0275property"]("ngModel",t.DefaultDateOne),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.DefaultDateTwo),l["\u0275\u0275advance"](8),l["\u0275\u0275property"]("options",!1)("customHeader",!0),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.productQtySearchName),l["\u0275\u0275advance"](3),l["\u0275\u0275styleProp"]("max-height","260px"),l["\u0275\u0275advance"](11),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind2"](44,22,t.reportProdQty,t.productQtySearchName)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("options",!1)("customHeader",!0),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.productCaSearchName),l["\u0275\u0275advance"](3),l["\u0275\u0275styleProp"]("max-height","260px"),l["\u0275\u0275advance"](11),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind2"](67,25,t.reportProdCa,t.productCaSearchName)),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("options",!1)("customHeader",!0),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.productProfitSearchName),l["\u0275\u0275advance"](3),l["\u0275\u0275styleProp"]("max-height","260px"),l["\u0275\u0275advance"](11),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBind2"](90,28,t.reportProdProfit,t.productProfitSearchName)))},directives:[c.a,u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.NgForm,u.DefaultValueAccessor,u.NgControlStatus,u.NgModel,S.b,r.k],pipes:[h.a,f.a],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[d.j.forChild(v)],d.j]}),e})(),x=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.b,P,o.a,a.a]]}),e})()},vohr:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{transform(e,t,n,r,a,o,d){if(!e||!(t||n||r||a||o||d))return e;let i=e.filter(e=>!(!(e.product.product.name.toLowerCase().indexOf(t.toLowerCase())>=0)||void 0!==n&&0!==n&&e.product.product.category.id!==n||void 0!==r&&0!==r&&e.product.measure_type.id!==r||void 0!==a&&0!==a&&e.compartment.id!==a||void 0!==o&&0!==o&&e.compartment.agency.id!==o||!(void 0===d||""===d||e.barcode.toLowerCase().indexOf(d.toLowerCase())>=0)));return null===i&&(i=[]),i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"stockView",type:e,pure:!0}),e})()}}]);