(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"GrU+":function(e,t,n){"use strict";n.r(t),n.d(t,"SaleNewModule",function(){return te});var i=n("ofXK"),r=n("ebz3"),s=n("tyNb"),a=n("mrSG"),l=n("fXoL"),o=n("w2su"),m=(n("QVta"),n("PdH4")),d=n.n(m),c=n("5ZdV"),u=n("5hwf"),h=n("Iab2"),p=n("u8Yb"),g=n("iHma"),S=n("e1SP"),f=n("jVwa"),v=n("ttbK"),b=n("hmux"),x=n("TM25"),E=n("6mAB"),y=n("kwXE"),w=n("gren"),C=n("1kSV"),_=n("5KfZ"),k=n("/n7v"),I=n("3Pt+"),A=n("bFKe"),V=n("vohr"),P=n("Km9j");const M=["productsList"];function R(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",57),l["\u0275\u0275elementStart"](1,"button",58),l["\u0275\u0275elementStart"](2,"span",59),l["\u0275\u0275text"](3,"CLIENT :\xa0\xa0"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4," (Veuillez ajouter un Client)"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"button",60),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().AddNewCustomer()}),l["\u0275\u0275element"](6,"span",61),l["\u0275\u0275text"](7," Ajouter"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",57),l["\u0275\u0275elementStart"](1,"button",62),l["\u0275\u0275elementStart"](2,"span",59),l["\u0275\u0275text"](3,"CLIENT :\xa0\xa0"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](4),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"button",60),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().AddNewCustomer()}),l["\u0275\u0275element"](6,"span",63),l["\u0275\u0275text"](7," Modifier"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"button",64),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().deleteCustomer()}),l["\u0275\u0275element"](9,"span",65),l["\u0275\u0275text"](10," Effacer"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](e.getSelectedCustomer())}}function N(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",6),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().giveUpSale()}),l["\u0275\u0275element"](1,"span",66),l["\u0275\u0275text"](2," Annuler la Vente"),l["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",6),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().giveUpSale()}),l["\u0275\u0275element"](1,"span",66),l["\u0275\u0275text"](2," Annuler le Devis"),l["\u0275\u0275elementEnd"]()}}function q(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"button",67),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("AIB: ",e.setAIB,"")}}function L(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"option",51),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;l["\u0275\u0275property"]("ngValue",e),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate"](e.name)}}function O(e,t){1&e&&l["\u0275\u0275element"](0,"br")}function j(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",68,69),l["\u0275\u0275elementStart"](2,"app-card",70),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"]().addProductLine(n)}),l["\u0275\u0275elementStart"](3,"div",71),l["\u0275\u0275elementStart"](4,"div",72),l["\u0275\u0275elementStart"](5,"div",73),l["\u0275\u0275element"](6,"img",74),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"span",75),l["\u0275\u0275element"](8,"span",76),l["\u0275\u0275text"](9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",77),l["\u0275\u0275elementStart"](11,"p",78),l["\u0275\u0275elementStart"](12,"b"),l["\u0275\u0275text"](13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](14,O,1,0,"br",79),l["\u0275\u0275elementStart"](15,"p",80),l["\u0275\u0275elementStart"](16,"span",81),l["\u0275\u0275text"](17),l["\u0275\u0275elementStart"](18,"small"),l["\u0275\u0275text"](19,"f"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](20),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("hidHeader",!0),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate1"](" ",e.quantity,""),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("",e.product.product.name,"\xa0"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",n.addBreakOrNot(e.product.product.name)),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](e.selling_price),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" (",e.product.measure_type.name,")")}}function B(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tr"),l["\u0275\u0275elementStart"](1,"td",85),l["\u0275\u0275elementStart"](2,"div",86),l["\u0275\u0275element"](3,"img",87),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"td",85),l["\u0275\u0275elementStart"](5,"div",86),l["\u0275\u0275elementStart"](6,"h6"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"p",88),l["\u0275\u0275text"](9),l["\u0275\u0275elementStart"](10,"span",89),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"td",90),l["\u0275\u0275elementStart"](13,"button",91),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"](2).changeTax(n.id,n.tax)}),l["\u0275\u0275elementStart"](14,"input",92),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"](2).changeTax(n.id,n.tax)})("ngModelChange",function(e){return t.$implicit.tax=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"td",90),l["\u0275\u0275elementStart"](16,"button",93),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit,i=l["\u0275\u0275reference"](20);return l["\u0275\u0275nextContext"](2).DecrementQuantity(n,i.value.quantite)}),l["\u0275\u0275element"](17,"span",94),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](18,"td",95),l["\u0275\u0275elementStart"](19,"form",43,96),l["\u0275\u0275elementStart"](21,"input",97,98),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.$implicit.quantite=e})("keyup",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit,i=l["\u0275\u0275reference"](20);return l["\u0275\u0275nextContext"](2).CheckQuantity(n,i.value.quantite)}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](23,"td",90),l["\u0275\u0275elementStart"](24,"button",93),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit;return l["\u0275\u0275nextContext"](2).IncrementQuantity(n.prod)}),l["\u0275\u0275element"](25,"span",99),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](26,"td",100),l["\u0275\u0275elementStart"](27,"button",101),l["\u0275\u0275text"](28),l["\u0275\u0275pipe"](29,"formatMoney"),l["\u0275\u0275elementStart"](30,"small"),l["\u0275\u0275text"](31," FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](32,"td",90),l["\u0275\u0275elementStart"](33,"button",102),l["\u0275\u0275listener"]("click",function(){l["\u0275\u0275restoreView"](e);const n=t.$implicit,i=t.index;return l["\u0275\u0275nextContext"](2).confirmProdRemoveModal(n,i)}),l["\u0275\u0275element"](34,"span",103),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=l["\u0275\u0275reference"](20);l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](e.product.product.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("",e.product.measure_type.name," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"]("(",e.prod.quantity," en stock)"),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",e.tax),l["\u0275\u0275advance"](7),l["\u0275\u0275property"]("ngModel",e.quantite),l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](29,6,e.p_vente*n.value.quantite)," ")}}function D(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",30),l["\u0275\u0275elementStart"](1,"table",82),l["\u0275\u0275elementStart"](2,"perfect-scrollbar"),l["\u0275\u0275elementStart"](3,"thead"),l["\u0275\u0275elementStart"](4,"tr"),l["\u0275\u0275elementStart"](5,"th"),l["\u0275\u0275text"](6,"Image"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"th"),l["\u0275\u0275text"](8,"Libell\xe9 / Type de Mesure"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"th",83),l["\u0275\u0275text"](10,"TAX"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"th",83),l["\u0275\u0275text"](12,"Moins"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"th",83),l["\u0275\u0275text"](14,"Quantit\xe9"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"th",83),l["\u0275\u0275text"](16,"Plus"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](17,"th",83),l["\u0275\u0275text"](18,"Total ("),l["\u0275\u0275elementStart"](19,"small"),l["\u0275\u0275text"](20,"Fcfa"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275text"](21,")"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](22,"th",83),l["\u0275\u0275text"](23,"Retrait"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"tbody"),l["\u0275\u0275template"](25,B,35,8,"tr",84),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](2),l["\u0275\u0275styleProp"]("max-height","300px"),l["\u0275\u0275advance"](23),l["\u0275\u0275property"]("ngForOf",e.item.lines)}}function z(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",104),l["\u0275\u0275text"](1,"Montant Re\xe7u "),l["\u0275\u0275elementStart"](2,"span",105),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().ResetNumPad()}),l["\u0275\u0275element"](3,"span",106),l["\u0275\u0275text"](4," R\xe9initialiser"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function H(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",2),l["\u0275\u0275elementStart"](1,"form",null,107),l["\u0275\u0275elementStart"](3,"div",108),l["\u0275\u0275elementStart"](4,"input",109,110),l["\u0275\u0275listener"]("keyup",function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().inputValidator(t)})("ngModelChange",function(t){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().numPadAmount=t}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"button",111),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().RemoveOnPad()}),l["\u0275\u0275text"](7,"X"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngModel",e.numPadAmount)}}function Q(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",112),l["\u0275\u0275elementStart"](1,"div",113),l["\u0275\u0275elementStart"](2,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("1")}),l["\u0275\u0275text"](3," 1 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("2")}),l["\u0275\u0275text"](5," 2 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",115),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("3")}),l["\u0275\u0275text"](7," 3 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("4")}),l["\u0275\u0275text"](9," 4 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("5")}),l["\u0275\u0275text"](11," 5 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function U(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",116),l["\u0275\u0275elementStart"](1,"div",113),l["\u0275\u0275elementStart"](2,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("6")}),l["\u0275\u0275text"](3," 6 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("7")}),l["\u0275\u0275text"](5," 7 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("8")}),l["\u0275\u0275text"](7," 8 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("9")}),l["\u0275\u0275text"](9," 9 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",114),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().NumPadAdd("0")}),l["\u0275\u0275text"](11," 0 "),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function W(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",45),l["\u0275\u0275elementStart"](1,"div",40),l["\u0275\u0275elementStart"](2,"button",117),l["\u0275\u0275text"](3,"RELIQUAT"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"button",53),l["\u0275\u0275text"](5),l["\u0275\u0275pipe"](6,"formatMoney"),l["\u0275\u0275elementStart"](7,"small"),l["\u0275\u0275text"](8,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](6,1,e.getReliquat().toFixed(0))," ")}}function $(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",45),l["\u0275\u0275elementStart"](1,"div",40),l["\u0275\u0275elementStart"](2,"button",118),l["\u0275\u0275text"](3,"RESTE"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"button",119),l["\u0275\u0275text"](5),l["\u0275\u0275elementStart"](6,"small"),l["\u0275\u0275text"](7,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](5),l["\u0275\u0275textInterpolate1"]("",e.getRestToPaid().toFixed(0)," ")}}function J(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",116),l["\u0275\u0275elementStart"](1,"div",120),l["\u0275\u0275elementStart"](2,"button",121),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().saveSale()}),l["\u0275\u0275element"](3,"span",122),l["\u0275\u0275text"](4," ENCAISSER"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function G(e,t){if(1&e){const e=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",116),l["\u0275\u0275elementStart"](1,"div",120),l["\u0275\u0275elementStart"](2,"button",121),l["\u0275\u0275listener"]("click",function(){return l["\u0275\u0275restoreView"](e),l["\u0275\u0275nextContext"]().saveDevis()}),l["\u0275\u0275element"](3,"span",123),l["\u0275\u0275text"](4," ENREGISTRER"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}const K=function(){return["/ventes/main"]},X=function(e,t,n,i,r,s,a){return[e,t,n,i,r,s,a]},Z=[{path:"",component:(()=>{class e{constructor(e,t,n,i,r,s,a,o,m){this.saleService=e,this.categoryService=t,this.productService=n,this.libraryService=i,this.locStorService=r,this.ngxService=s,this.router=a,this.modalService=o,this.constantService=m,this.pdfTitle="Facture",this.lineSize=0,this.Defremise=0,this.typeRemise="pourcentage",this.typeRemise1="pourcentage",this.typeRemise2="montant",this.Deftva=0,this.tva1=0,this.tva2=18,this.prodSaleAdd=new u.a,this.stock_view=[],this.quantity=0,this.selling_price=0,this.reliquat=0,this.restToPaid=0,this.visible=!1,this.isSaving=!1,this.isCompleted=!1,this.isSuccess=!1,this.statusMessage="",this.isInvoiceVisible=!1,this.generatedInvoice="",this.isLoadingStock=!1,this.display=!1,this.created=new l.EventEmitter,this.is_checked=!1,this.param=new p.a}ngOnInit(){this.user=this.locStorService.getUser(),this.param=new p.a,this.getStockView(),this.getCategories(),this.getParamsMecef(),this.item=new c.a}ngAfterViewInit(){this.onLoadFocus()}ngOnChanges(){this.user=this.locStorService.getUser(),this.param=new p.a,this.getStockView(),this.item=new c.a}inputValidator(e){let t=JSON.stringify(this.numPadAmount);(!/[0-9]/.test(e.target.value)||t.length>7)&&this.ResetNumPad()}addProductLine(e){null==this.item.lines&&(this.item.lines=[]),0===e.quantity_sell&&(e.quantity_sell=1);let t=this.item.lines.filter(t=>t.id===e.id);if(0!==t.length){let n=this.item.lines.indexOf(t[0]);if(this.item.lines[n].quantite>=e.quantity)return void this.libraryService.onWarning("Quantit\xe9 en stock atteinte!",1e3,"top-end");this.item.lines[n].quantite=this.item.lines[n].quantite+e.quantity_sell,this.updateTax(this.item.lines[n].id,this.item.lines[n].tax),this.lineSize=this.item.lines.length}else{let t=new f.a;t.id=e.id,t.product=e.product,t.compartment=e.compartment,t.p_achat=e.purchase_price,t.p_vente=e.selling_price,t.quantite=e.quantity_sell,t.ts=0,t.libellets="",t.tax=this.setGroup,t.prod=e;let n=this.libraryService.copy(t);this.item.lines.push(n),this.updateTax(n.id,n.tax),this.lineSize=this.item.lines.length}}removeProductLine(e){this.item.lines.splice(e,1),this.lineSize=this.item.lines.length}canSaveDevis(){return 1!=(null==this.item.lines||0===this.item.lines.length)&&!0!==this.isSaving}getNap(e){if(null==this.item)return 0;if(null==this.item.lines)return 0;if(0===this.item.lines.length)return 0;let t,n=0;switch(n=this.item.lines.map(e=>e.quantite*e.p_vente+e.mt_tva).reduce((e,t)=>e+t),"montant"===e.type_remise?(this.LineRemise=100*e.remise/this.getTotal(),this.LineTVA=e.tva,this.REMISE=this.getTotal()*this.LineRemise/100,this.NAP=n-n*this.LineRemise/100):"pourcentage"===e.type_remise&&(this.LineRemise=e.remise,this.LineTVA=e.tva,this.REMISE=this.getTotal()*this.LineRemise/100,this.NAP=n-n*this.LineRemise/100),this.setAIB){case"0%":return this.item.taux_aib=0,this.item.amount_aib=0,this.NAP;case"1%":return t=1*this.getTotal()/100,this.item.taux_aib=1,this.item.amount_aib=t,this.NAP=this.NAP+t,this.NAP;case"5%":return t=5*this.getTotal()/100,this.item.taux_aib=5,this.item.amount_aib=t,this.NAP=this.NAP+t,this.NAP}}getReliquat(){let e=this.numPadAmount-this.NAP;return this.reliquat=e>0?e:0,this.reliquat}getTVA(){if(null==this.item)return 0;if(null==this.item.lines)return 0;if(0===this.item.lines.length)return 0;let e=0;return e=this.item.lines.map(e=>e.mt_tva).reduce((e,t)=>e+t),e}getRestToPaid(){let e=this.numPadAmount-this.NAP;return this.restToPaid=e<0?-e:0,this.restToPaid}getTotal(){if(null==this.item)return 0;if(null==this.item.lines)return 0;if(0===this.item.lines.length)return 0;let e=0;return e=this.item.lines.map(e=>e.quantite*e.p_vente).reduce((e,t)=>e+t),e}saveSale(){null!=this.item.lines&&0!==this.item.lines.length?null!=this.numPadAmount?0===this.getRestToPaid()?(this.ngxService.start(),this.pdfTitle="Facture",this.item.id=0,this.item.date=new Date,this.item.is_balanced=!0,this.item.amount_original=this.getTotal(),this.item.amount_remise=this.REMISE,this.item.amount_tva=this.getTVA(),this.item.amount_paid=JSON.parse(this.numPadAmount),this.item.amount_to_pay=this.NAP,this.item.remainder=this.getReliquat(),this.item.rest_to_pay=this.getRestToPaid(),this.item.agent=this.user,this.item.with_invoice=null,this.item.reference="",this.item.lines.forEach(e=>{this.updateTax(e.id,e.tax)}),null===this.locStorService.readFromSession("Customer")?this.item.customer=new S.a:(this.item.customer=this.locStorService.readFromSession("Customer"),this.customer.solde=this.getRestToPaid()),this.isSaving=!0,this.isCompleted=!1,this.statusMessage="",this.generatedInvoice="",this.isInvoiceVisible=!1,this.saleService.createSale(this.item).then(e=>{this.giveUpSale(),this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!0,this.visible=!1,this.getStockView(),this.ngxService.stop();let t=e.blob(),n=new Blob([t],{type:"application/pdf"});h.saveAs(n,"ISHOWO_TICKET_CAISSE.pdf");var i=URL.createObjectURL(n);this.libraryService.onSuccess("Vente Enregistr\xe9e avec Succ\xe8s!",2500,"top-end"),window.open(i,"_blank"),this.locStorService.saveToSession("lastSale",i)},e=>{this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!1,this.ngxService.stop(),this.libraryService.onSuccess("Vente Enregistr\xe9e avec Succ\xe8s!",2e3,"top-end"),this.libraryService.onError("Echec de la normalisation!",3e3,"top-start")})):this.libraryService.onWarning("Le montant saisi est incorrect!",1300,"top-end"):this.libraryService.onWarning("veuillez renseignez le Montant re\xe7u!",1200,"top-end"):this.libraryService.onWarning("Veuillez ajouter un Produit!",1100,"top-end")}saveDevis(){null!=this.item.lines&&0!==this.item.lines.length?null!==this.locStorService.readFromSession("Customer")?(this.ngxService.start(),this.pdfTitle="Devis",null==this.item.lines&&(this.item.lines=[]),0!==this.item.lines.length?(this.item.id=0,this.item.date=new Date,this.item.is_balanced=!1,this.item.amount_original=this.getTotal(),this.item.amount_remise=this.REMISE,this.item.amount_tva=this.getTVA(),this.item.amount_paid=0,this.item.amount_to_pay=this.NAP,this.item.remainder=this.getReliquat(),this.item.rest_to_pay=this.getRestToPaid(),this.item.with_invoice=null,this.item.agent=this.user,this.item.customer=this.locStorService.readFromSession("Customer"),this.item.reference="",this.isSaving=!0,this.isCompleted=!1,this.statusMessage="",this.generatedInvoice="",this.isInvoiceVisible=!1,this.item.lines.forEach(e=>{this.updateTax(e.id,e.tax)}),this.saleService.createDevis(this.item).then(e=>{this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!0,this.visible=!1,this.ngxService.stop(),this.item=new c.a,this.lineSize=0,this.deleteCustomer(),this.Defremise=0,this.Deftva=0,this.statusMessage="Devis cr\xe9\xe9 avec succ\xe8s",this.created.emit("created"),this.getStockView();let t=e.blob(),n=new Blob([t],{type:"application/pdf"});h.saveAs(n,"ISHOWO_DEVIS.pdf");var i=URL.createObjectURL(n);this.libraryService.onSuccess("Devis Enregistr\xe9e avec Succ\xe8s!",2500,"top-end"),window.open(i,"_blank"),this.locStorService.saveToSession("lastSale",i)},e=>{this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!1,this.ngxService.stop(),this.statusMessage=this.libraryService.getServiceErrorText(e)})):this.libraryService.showMessage("Veuillez aujouter des produits \xe0 cette commande")):this.libraryService.onWarning("veuillez renseignez le Client!",1100,"top-end"):this.libraryService.onWarning("Veuillez ajouter un Produit!",1100,"top-end")}getStockView(){this.stock_view=[],this.isLoadingStock=!0,this.productService.getStockViewForSale(this.user).then(e=>{this.stock_view=e,this.isLoadingStock=!1},e=>{this.isLoadingStock=!1})}getCategories(){this.categories=[],this.categoryService.getCategories(this.user).then(e=>{let t=new g.a;t.id=0,t.name="Toutes",this.categories.push(t),null!==e&&e.filter(e=>this.categories.push(e))},e=>{})}listSale(){this.router.navigate(["/app/sales_list"])}addBreakOrNot(e){return e.length<14||e.length<14}changeTax(e,t){let n=this.item.lines.filter(t=>t.id===e),i=this.item.lines.indexOf(n[0]),r=this.item.lines[i].p_vente*this.item.lines[i].quantite;switch(this.item.amount_remise=this.REMISE,t){case void 0:this.item.lines[i].tax="E",this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,this.item.lines[i].mt_tva=0;break;case"E":let e;this.item.lines[i].tax="B",this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,e=r-this.item.lines[i].mt_remise,this.item.lines[i].mt_tva=18*e/100;break;case"B":this.item.lines[i].tax="A",this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,this.item.lines[i].mt_tva=0;break;default:this.item.lines[i].tax="E",this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,this.item.lines[i].mt_tva=0}}updateAllProducts(){this.item.lines.forEach(e=>{this.updateTax(e.id,e.tax)})}updateTax(e,t){let n=this.item.lines.filter(t=>t.id===e),i=this.item.lines.indexOf(n[0]),r=this.item.lines[i].p_vente*this.item.lines[i].quantite;switch(this.item.amount_remise=this.REMISE,t){case"A":this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,this.item.lines[i].mt_tva=0;break;case"B":let e;this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,e=r-this.item.lines[i].mt_remise,this.item.lines[i].mt_tva=18*e/100;break;case"E":this.item.lines[i].mt_remise=this.item.amount_remise>0?r*this.LineRemise/100:0,this.item.lines[i].mt_tva=0}}IncrementQuantity(e){null==this.item.lines&&(this.item.lines=[]),0===e.quantity_sell&&(e.quantity_sell=1);let t=this.item.lines.filter(t=>t.id===e.id);if(0!==t.length){let n=this.item.lines.indexOf(t[0]);if(this.item.lines[n].quantite>=e.quantity)return void this.libraryService.onWarning("Quantit\xe9 en stock atteinte!",1e3,"top-end");this.item.lines[n].quantite=this.item.lines[n].quantite+e.quantity_sell,this.updateTax(this.item.lines[n].id,this.item.lines[n].tax),this.lineSize=this.item.lines.length}}DecrementQuantity(e,t){if(1==t)return void this.libraryService.onWarning("La quantit\xe9 minimum est 1",1e3,"top-end");let n=this.item.lines.filter(t=>t.id===e.id)[0],i=this.item.lines.indexOf(n);this.item.lines[i].quantite=this.item.lines[i].quantite-1,this.updateTax(this.item.lines[i].id,this.item.lines[i].tax)}CheckQuantity(e,t){let n=this.item.lines.filter(t=>t.id==e.id)[0],i=this.item.lines.indexOf(n);return t>e.prod.quantity?(this.item.lines[i].quantite=1,void this.libraryService.onWarning("Quantit\xe9 en stock atteinte!",1100,"top-end")):0==t?(this.item.lines[i].quantite=1,void this.libraryService.onWarning("La quantit\xe9 minimum est 1",1100,"top-end")):void 0}AddNewCustomer(){this.modalService.open(o.a,this.constantService.ModalOptionsOne)}ResetNumPad(){this.numPadAmount=null}NumPadAdd(e){let t=document.getElementById("numPadAmount").value+e;JSON.stringify(t).length>9?this.ResetNumPad():this.numPadAmount=t}RemoveOnPad(){let e=document.getElementById("numPadAmount").value;if(JSON.parse(e)<10)this.numPadAmount=null;else{let t=JSON.stringify(e),n=t.substring(0,t.length-2);n=n.replace('"',""),n=JSON.parse(n),this.numPadAmount=n}}checkIfCustomerExist(){return null!==this.locStorService.readFromSession("Customer")}deleteCustomer(){localStorage.removeItem("Customer")}giveUpSale(){localStorage.removeItem("Customer"),this.item=new c.a,this.lineSize=0,this.ResetNumPad(),this.Defremise=0,this.Deftva=0}getSelectedCustomer(){let e=this.locStorService.readFromSession("Customer");if(null!==e)return this.CustomerSelected=!0,this.customer=e,""===this.customer.social_reason||null==this.customer.social_reason?this.customer.nom+" "+this.customer.prenom:this.customer.social_reason;this.CustomerSelected=!1}getParamsMecef(){this.saleService.getParamsMecef(this.user).then(e=>{let t=e.filter(e=>"DEF_TAX"===e.key)[0],n=e.filter(e=>"AIB"===e.key)[0];this.setGroup=t.value,this.setAIB=n.value},e=>{})}resetFilterForm(){this.param=new p.a}printData(){this.isPrinting=!0,this.pdfTitle="Facture";let e=this.locStorService.readFromSession("lastSale");null!==e&&window.open(e,"_blank")}OnchangeStatut(e){this.ResetNumPad(),this.is_checked=e.target.checked}confirmProdRemoveModal(e,t){return Object(a.a)(this,void 0,void 0,function*(){yield d.a.fire({customClass:{container:"myCustomSwal",confirmButton:"btn btn-danger"},text:"\xcates-vous s\xfbre de retirer le produit : "+e.product.product.name,icon:"warning",imageHeight:100,imageWidth:100,showCancelButton:!0,cancelButtonText:"Annuler",confirmButtonText:"Oui je Retire",reverseButtons:!0,buttonsStyling:!0}).then(e=>{e.isConfirmed&&(this.removeProductLine(t),this.libraryService.onSuccess("Produit retir\xe9",1200,"top-end"))})})}onLoadFocus(){document.getElementById("code_barre").focus()}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](v.a),l["\u0275\u0275directiveInject"](b.a),l["\u0275\u0275directiveInject"](x.a),l["\u0275\u0275directiveInject"](E.a),l["\u0275\u0275directiveInject"](y.a),l["\u0275\u0275directiveInject"](w.b),l["\u0275\u0275directiveInject"](s.f),l["\u0275\u0275directiveInject"](C.j),l["\u0275\u0275directiveInject"](_.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sale-new"]],viewQuery:function(e,t){if(1&e&&l["\u0275\u0275viewQuery"](M,!0),2&e){let e;l["\u0275\u0275queryRefresh"](e=l["\u0275\u0275loadQuery"]())&&(t.listItems=e)}},inputs:{subject:"subject"},outputs:{created:"created"},features:[l["\u0275\u0275NgOnChangesFeature"]],decls:110,vars:79,consts:[["cardClass","full-card","headerClass","border-0 pt-0 pb-0",3,"options","customHeader"],[1,"app-card-header"],[1,"row"],["class","form-group mb-0 col-sm-4 input-group d-flex justify-content-around",4,"ngIf"],[1,"mb-0","col-sm-8","d-flex","justify-content-around"],["class","btn btn-light btn-sm font-weight-bold",3,"click",4,"ngIf"],[1,"btn","btn-light","btn-sm","font-weight-bold",3,"click"],[1,"fa","fa-print"],[1,"custom-control","custom-switch"],["type","checkbox","id","customswitch1",1,"custom-control-input",3,"checked","change"],["for","customswitch1",1,"custom-control-label","font-weight-bold"],["class","btn btn-danger  btn-sm text-center",4,"ngIf"],[1,"btn","btn-light","btn-sm","font-weight-bold",3,"routerLink"],[1,"fa","fa-chevron-circle-left"],[1,"col-sm-9"],["blockClass","pt-0 ",3,"options","customHeader","hidHeader"],[1,"mb-3"],["filterForm","ngForm"],[1,"col-sm-2"],[1,"badge","badge-primary","mt-3"],[1,"col-sm-3"],[1,"form-group","mb-0","input-group"],[1,"btn","btn-light","btn-sm","col-4"],["type","text","id","code_barre","placeholder","Code Barre","name","barre_code",1,"form-control","input-sm","pl-2","col-8",3,"ngModel","ngModelChange"],["type","text","placeholder","Nom du Produit","name","name",1,"form-control","input-sm","pl-2","col-8",3,"ngModel","ngModelChange"],[1,"col-sm-4"],["name","","id","","name","cat_prod",1,"form-control","col-8",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["ngbTooltip","R\xe9initialiser le filtre",1,"btn","btn-warning","btn-sm","col-2",3,"placement","click"],[1,"feather","icon-refresh-ccw"],[1,"table-responsive"],["class","col-sm-2 col-product mb-3",4,"ngFor","ngForOf"],[1,"badge","badge-warning","float-left","mb-2"],["class","table-responsive",4,"ngIf"],["blockClass","pl-2 pr-2 pt-3 mb-0 pb-0",3,"options","hidHeader"],["class","font-weight-bold",4,"ngIf"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","row mt-3 mb-3",4,"ngIf"],[1,"row","mt-0"],[1,"form-group","mb-0","input-group","col-sm-12","d-flex"],[1,"btn","btn-primary","col-4","pl-2","font-weight-bold","text-left"],[1,"btn","saleAmount","btn-light","col-8","font-weight-bold","text-right"],["role","form"],["SaleForm","ngForm"],[1,"row","mt-2"],[1,"btn","btn-info","btn-sm","col-5","font-weight-bold","text-left"],["type","number","name","remise","required","",1,"col-5","text-right","pr-0","customInput",3,"ngModel","ngModelChange","keyup","change"],["remise","ngModel"],["name","type_remise","required","",1,"col-2","p-0","customInput",3,"ngModel","ngModelChange"],["type_remise","ngModel"],[3,"ngValue"],[2,"font-size","0.7em"],[1,"btn","btn-light","btn-sm","col-7","font-weight-bold","text-right"],[1,"btn","btn-success","col-4","pl-2","font-weight-bold","text-center",2,"font-size","1.4em"],[1,"btn","btn-light","col-8","saleAmount","font-weight-bold","text-right"],["class","row mt-2",4,"ngIf"],[1,"form-group","mb-0","col-sm-4","input-group","d-flex","justify-content-around"],[1,"btn","btn-light","btn-sm","col-9","text-left","text-muted"],[1,"text-primary","font-weight-bold"],[1,"btn","btn-primary","btn-sm","col-3","font-weight-bold",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-light","btn-sm","col-6","text-left","text-muted"],[1,"fa","fa-edit"],[1,"btn","btn-danger","col-3","btn-sm",3,"click"],[1,"fa","fa-trash"],[1,"fa","feather","icon-refresh-ccw"],[1,"btn","btn-danger","btn-sm","text-center"],[1,"col-sm-2","col-product","mb-3"],["productsList",""],["cardClass","user-card user-card-1 mt-1 mb-0","blockClass","p-1 mb-0",3,"hidHeader","click"],[1,"user-about-block","text-center","pt-4"],[1,"row","align-items-end"],[1,"col","notSelected"],["src","assets/images/user/img-avatar-1.jpg","alt","User image",1,"img-radius","img-fluid","wid-40"],[1,"badge","bg-white","text-danger",2,"border-right","1px solid gray"],[1,"fa","fa-database"],[1,"text-center","pt-1"],[1,"mb-0","notSelected"],[4,"ngIf"],[1,"mb-1","notSelected"],[1,"badge","badge-primary"],[1,"table","table-hover","table-borderless","mb-0"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"pt-1","pb-1"],[1,"d-inline-block","align-middle"],["src","assets/images/user/img-avatar-1.jpg","data-toggle","tooltip","title","John Deo","data-placement","top","alt","user image",1,"img-radius","wid-40","align-top","m-r-15"],[1,"text-muted","m-b-0"],[1,"text-info","font-weight-bold"],[1,"text-center","pt-1","pb-1"],[1,"btn","btn-light","text-center",3,"click"],["disabled","","type","text",1,"font-weight-bold","text-primary","text-center","notSelected",2,"width","30px",3,"ngModel","click","ngModelChange"],[1,"btn","btn-warning","text-center",3,"click"],[1,"fas","fa-minus-square"],["width","13%",1,"text-center","pt-1","pb-1"],["quantiteForm","ngForm"],["type","number","name","quantite",1,"form-control","text-center",3,"ngModel","ngModelChange","keyup"],["quantite","ngModel"],[1,"fas","fa-plus-square"],[1,"text-right","pt-1","pb-1","bg-light"],[1,"btn","text-dark","font-weight-bold"],[1,"btn","btn-danger","text-center",3,"click"],[1,"fas","fa-times-circle"],[1,"font-weight-bold"],[1,"badge","badge-info","notSelected",3,"click"],[1,"feather","icon-refresh-cw"],["AmountForm","ngForm"],[1,"form-group","mb-0","input-group","col-sm-12","d-flex","pad"],["type","number","id","numPadAmount","placeholder","Montant Re\xe7u","name","numPadAmount",1,"col-10","padAmount",3,"ngModel","keyup","ngModelChange"],["num_PadAmount","ngModel"],[1,"notSelected","btn","bg-danger","btn-sm","col-2","font-weight-bold","text-white",3,"click"],[1,"row","mt-3"],[1,"col-sm-12","d-flex","justify-content-around"],[1,"notSelected","card","bg-c-green","p-1","mb-0","number_pad","text-white","text-center",3,"click"],[1,"notSelected","card","bg-c-green","p-1","mb-0","pb-0","number_pad","text-white","text-center",3,"click"],[1,"row","mt-3","mb-3"],[1,"btn","btn-warning","btn-sm","col-5","font-weight-bold","text-left"],[1,"btn","btn-danger","col-5","btn-sm","font-weight-bold","text-left"],[1,"btn","btn-light","col-7","btn-sm","font-weight-bold","text-right"],[1,"col-sm-12","d-flex","justify-content-center"],[1,"btn","btn-lg","btn-primary","text-white","font-weight-bold",3,"click"],[1,"fa","fa-money-bill-wave"],[1,"fa","fa-file-invoice-dollar"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"app-card",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275template"](3,R,8,0,"div",3),l["\u0275\u0275template"](4,T,11,1,"div",3),l["\u0275\u0275elementStart"](5,"div",4),l["\u0275\u0275template"](6,N,3,0,"button",5),l["\u0275\u0275template"](7,F,3,0,"button",5),l["\u0275\u0275elementStart"](8,"button",6),l["\u0275\u0275listener"]("click",function(){return t.printData()}),l["\u0275\u0275element"](9,"span",7),l["\u0275\u0275text"](10," Dernier Ticket"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"div",8),l["\u0275\u0275elementStart"](12,"input",9),l["\u0275\u0275listener"]("change",function(e){return t.OnchangeStatut(e)}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"label",10),l["\u0275\u0275text"](14,"Devis"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](15,q,2,1,"button",11),l["\u0275\u0275elementStart"](16,"button",12),l["\u0275\u0275element"](17,"span",13),l["\u0275\u0275text"](18," Retour"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](19,"div",2),l["\u0275\u0275elementStart"](20,"div",14),l["\u0275\u0275elementStart"](21,"app-card",15),l["\u0275\u0275elementStart"](22,"form",16,17),l["\u0275\u0275elementStart"](24,"div",2),l["\u0275\u0275elementStart"](25,"div",18),l["\u0275\u0275elementStart"](26,"span",19),l["\u0275\u0275text"](27),l["\u0275\u0275pipe"](28,"stockView"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](29,"div",20),l["\u0275\u0275elementStart"](30,"div",21),l["\u0275\u0275elementStart"](31,"button",22),l["\u0275\u0275text"](32,"C.Barre"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](33,"input",23),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.codebarre=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](34,"div",20),l["\u0275\u0275elementStart"](35,"div",21),l["\u0275\u0275elementStart"](36,"button",22),l["\u0275\u0275text"](37,"Nom"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"input",24),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.product=e}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](39,"div",25),l["\u0275\u0275elementStart"](40,"div",21),l["\u0275\u0275elementStart"](41,"button",22),l["\u0275\u0275text"](42,"Cat\xe9gorie"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](43,"select",26),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.category=e}),l["\u0275\u0275template"](44,L,2,2,"option",27),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](45,"button",28),l["\u0275\u0275listener"]("click",function(){return t.resetFilterForm()}),l["\u0275\u0275element"](46,"span",29),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](47,"div",30),l["\u0275\u0275elementStart"](48,"perfect-scrollbar"),l["\u0275\u0275elementStart"](49,"div",2),l["\u0275\u0275template"](50,j,21,6,"div",31),l["\u0275\u0275pipe"](51,"stockView"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](52,"hr"),l["\u0275\u0275elementStart"](53,"span",32),l["\u0275\u0275text"](54),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](55,D,26,3,"div",33),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](56,"div",20),l["\u0275\u0275elementStart"](57,"app-card",34),l["\u0275\u0275template"](58,z,5,0,"div",35),l["\u0275\u0275template"](59,H,8,1,"div",36),l["\u0275\u0275template"](60,Q,12,0,"div",37),l["\u0275\u0275template"](61,U,12,0,"div",38),l["\u0275\u0275elementStart"](62,"div",39),l["\u0275\u0275elementStart"](63,"div",40),l["\u0275\u0275elementStart"](64,"button",41),l["\u0275\u0275text"](65,"TOTAL HT"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](66,"button",42),l["\u0275\u0275text"](67),l["\u0275\u0275pipe"](68,"formatMoney"),l["\u0275\u0275elementStart"](69,"small"),l["\u0275\u0275text"](70,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](71,"form",43,44),l["\u0275\u0275elementStart"](73,"div",45),l["\u0275\u0275elementStart"](74,"div",40),l["\u0275\u0275elementStart"](75,"button",46),l["\u0275\u0275text"](76,"REMISE"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](77,"input",47,48),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.Defremise=e})("keyup",function(){return t.updateAllProducts()})("change",function(){return t.updateAllProducts()}),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](79,"select",49,50),l["\u0275\u0275listener"]("ngModelChange",function(e){return t.typeRemise=e}),l["\u0275\u0275elementStart"](81,"option",51),l["\u0275\u0275text"](82,"%"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](83,"option",51),l["\u0275\u0275elementStart"](84,"small"),l["\u0275\u0275text"](85,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](86,"div",45),l["\u0275\u0275elementStart"](87,"div",40),l["\u0275\u0275elementStart"](88,"button",46),l["\u0275\u0275text"](89,"TOTAL TVA "),l["\u0275\u0275elementStart"](90,"span",52),l["\u0275\u0275text"](91,"18%"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](92,"button",53),l["\u0275\u0275text"](93),l["\u0275\u0275pipe"](94,"formatMoney"),l["\u0275\u0275elementStart"](95,"small"),l["\u0275\u0275text"](96,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](97,"div",45),l["\u0275\u0275elementStart"](98,"div",40),l["\u0275\u0275elementStart"](99,"button",54),l["\u0275\u0275text"](100,"NET A PAYER"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](101,"button",55),l["\u0275\u0275text"](102),l["\u0275\u0275pipe"](103,"formatMoney"),l["\u0275\u0275elementStart"](104,"small"),l["\u0275\u0275text"](105,"FCFA"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](106,W,9,3,"div",56),l["\u0275\u0275template"](107,$,8,1,"div",56),l["\u0275\u0275template"](108,J,5,0,"div",38),l["\u0275\u0275template"](109,G,5,0,"div",38),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){const e=l["\u0275\u0275reference"](72);l["\u0275\u0275property"]("options",!1)("customHeader",!0),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf",0==t.checkIfCustomerExist()),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",1==t.checkIfCustomerExist()),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.is_checked),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("checked",t.is_checked),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","0%"!==t.setAIB),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("routerLink",l["\u0275\u0275pureFunction0"](62,K)),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("options",!1)("customHeader",!0)("hidHeader",!0),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBindV"](28,40,l["\u0275\u0275pureFunction7"](63,X,t.stock_view,t.param.product,t.param.category.id,t.param.measure_type.id,t.param.location.id,t.param.agency.id,t.param.codebarre)).length," Produits trouv\xe9s"),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngModel",t.param.codebarre),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.param.product),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngModel",t.param.category),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",t.categories),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("placement","top"),l["\u0275\u0275advance"](3),l["\u0275\u0275styleProp"]("max-height","115px"),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",l["\u0275\u0275pipeBindV"](51,48,l["\u0275\u0275pureFunction7"](71,X,t.stock_view,t.param.product,t.param.category.id,t.param.measure_type.id,t.param.location.id,t.param.agency.id,t.param.codebarre))),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate1"]("",t.lineSize," Produits Ajout\xe9s"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.lineSize>0),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("options",!1)("hidHeader",!0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](68,56,t.getTotal())," "),l["\u0275\u0275advance"](10),l["\u0275\u0275property"]("ngModel",t.Defremise),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngModel",t.typeRemise),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngValue",t.typeRemise1),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngValue",t.typeRemise2),l["\u0275\u0275advance"](10),l["\u0275\u0275textInterpolate1"](" ",l["\u0275\u0275pipeBind1"](94,58,t.getTVA().toFixed(0))," "),l["\u0275\u0275advance"](9),l["\u0275\u0275textInterpolate1"]("",l["\u0275\u0275pipeBind1"](103,60,t.getNap(e.value).toFixed(0)||0)," "),l["\u0275\u0275advance"](4),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!t.is_checked),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.is_checked)}},directives:[k.a,i.l,s.g,I["\u0275angular_packages_forms_forms_y"],I.NgControlStatusGroup,I.NgForm,I.DefaultValueAccessor,I.NgControlStatus,I.NgModel,I.SelectControlValueAccessor,i.k,C.t,A.b,I.NumberValueAccessor,I.RequiredValidator,I.NgSelectOption,I["\u0275angular_packages_forms_forms_x"]],pipes:[V.a,P.a],styles:[""]}),e})()}];let Y=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.j.forChild(Z)],s.j]}),e})();var ee=n("90Zs");let te=(()=>{class e{}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:"SnotifyToastConfig",useValue:ee.c},ee.b],imports:[[i.b,Y,r.a,ee.a]]}),e})()}}]);