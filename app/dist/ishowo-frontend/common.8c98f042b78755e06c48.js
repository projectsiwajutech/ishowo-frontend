(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{BSRH:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},Dy6s:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},NW7G:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},UTIo:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("fXoL"),a=n("kwXE"),i=n("6mAB");let o=(()=>{class e{constructor(e,t){this.localstorageService=e,this.libraryService=t}canActivate(e,t){return 1==this.localstorageService.getGroup().laws.filter(e=>"F1"===e.reference)[0].ischecked||(this.libraryService.onError("Vous n'\xeates pas autoris\xe9 \xe0 acc\xe9der \xe0 cette page !",1500,"top"),!1)}canLoad(e,t){return 1==this.localstorageService.getGroup().laws.filter(e=>"F1"===e.reference)[0].ischecked||(this.libraryService.onError("Vous n'\xeates pas autoris\xe9 \xe0 acc\xe9der \xe0 cette page !",1500,"top"),!1)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](a.a),r["\u0275\u0275inject"](i.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},VU1P:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{constructor(e){this.elements=e}onToggle(e){e.preventDefault(),this.elements.nativeElement.classList.toggle("complete")}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](r.ElementRef))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","appTodoCardComplete",""]],hostBindings:function(e,t){1&e&&r["\u0275\u0275listener"]("click",function(e){return t.onToggle(e)})}}),e})()},c4Tr:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("fXoL"),a=n("1kSV"),i=n("/n7v"),o=n("3Pt+"),l=n("ofXK"),d=n("Km9j");let m=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}close(){this.activeModal.close()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-on-retail"]],inputs:{item:"item"},decls:70,vars:20,consts:[[3,"options","customHeader"],[1,"app-card-header"],[1,"row","mb-3"],[1,"col-sm-6"],[1,"lead"],[1,"lead","text-success","font-weight-bold"],[1,"col-sm-6","d-flex","justify-content-end"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"fa","fa-chevron-circle-left"],[1,"row","mt-2"],[1,"form-group","mb-0","input-group","col-sm-6","d-flex"],[1,"btn","btn-primary","col-4"],["type","text","disabled","","name","ref",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["ref","ngModel"],["type","text","disabled","","name","exp",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["exp","ngModel"],["type","text","disabled","","name","nom",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["nom","ngModel"],["type","text","disabled","","name","categ",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["categ","ngModel"],[1,"row","mt-3"],["type","text","disabled","","name","rayon",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["rayon","ngModel"],["type","text","disabled","","name","agence",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["agence","ngModel"],["type","text","disabled","","name","p_achat",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["p_achat","ngModel"],["type","text","disabled","","name","p_vente",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["p_vente","ngModel"],["type","text","disabled","","name","unite",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["unite","ngModel"],["type","text","disabled","","name","qte",1,"form-control","col-8","rightnput2","pr-2",3,"ngModel"],["qte","ngModel"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"app-card",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"span",4),r["\u0275\u0275text"](5,"D\xe9tails du Produit : "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"span",5),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",6),r["\u0275\u0275elementStart"](9,"button",7),r["\u0275\u0275listener"]("click",function(){return t.close()}),r["\u0275\u0275element"](10,"span",8),r["\u0275\u0275text"](11," Retour"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",9),r["\u0275\u0275elementStart"](13,"div",10),r["\u0275\u0275elementStart"](14,"button",11),r["\u0275\u0275text"](15," R\xe9f\xe9rence "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"input",12,13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",10),r["\u0275\u0275elementStart"](19,"button",11),r["\u0275\u0275text"](20," Date Expiration "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"input",14,15),r["\u0275\u0275pipe"](23,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",9),r["\u0275\u0275elementStart"](25,"div",10),r["\u0275\u0275elementStart"](26,"button",11),r["\u0275\u0275text"](27," Nom"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"input",16,17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"div",10),r["\u0275\u0275elementStart"](31,"button",11),r["\u0275\u0275text"](32," Cat\xe9gorie"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](33,"input",18,19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"div",20),r["\u0275\u0275elementStart"](36,"div",10),r["\u0275\u0275elementStart"](37,"button",11),r["\u0275\u0275text"](38," Rayon"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](39,"input",21,22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"div",10),r["\u0275\u0275elementStart"](42,"button",11),r["\u0275\u0275text"](43," Agence"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](44,"input",23,24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"div",20),r["\u0275\u0275elementStart"](47,"div",10),r["\u0275\u0275elementStart"](48,"button",11),r["\u0275\u0275text"](49," Prix d'Achat"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](50,"input",25,26),r["\u0275\u0275pipe"](52,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](53,"div",10),r["\u0275\u0275elementStart"](54,"button",11),r["\u0275\u0275text"](55," Prix de Vente"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](56,"input",27,28),r["\u0275\u0275pipe"](58,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](59,"div",20),r["\u0275\u0275elementStart"](60,"div",10),r["\u0275\u0275elementStart"](61,"button",11),r["\u0275\u0275text"](62," Unit\xe9 de Mesure"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](63,"input",29,30),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"div",10),r["\u0275\u0275elementStart"](66,"button",11),r["\u0275\u0275text"](67," Quantit\xe9 Actuelle"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](68,"input",31,32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("options",!1)("customHeader",!0),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](t.item.product.product.name),r["\u0275\u0275advance"](9),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.barcode),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("ngModel",r["\u0275\u0275pipeBind2"](23,13,t.item.expiration_date,"dd/MM/yyyy")),r["\u0275\u0275advance"](7),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.product.product.name),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.product.product.category.name),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.compartment.name),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.compartment.agency.name),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("ngModel",r["\u0275\u0275pipeBind1"](52,16,t.item.purchase_price)),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("ngModel",r["\u0275\u0275pipeBind1"](58,18,t.item.selling_price)),r["\u0275\u0275advance"](7),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.product.measure_type.name),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("ngModel",t.item.quantity))},directives:[i.a,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel],pipes:[l.d,d.a],styles:[""]}),e})()},fxYm:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("BSRH"),a=n("+PR4");class i{constructor(){this.id=0,this.id_product=0,this.product=new r.a,this.measure_type=new a.a}}},lVo9:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("fXoL"),a=n("Iab2"),i=(n("QVta"),n("PdH4")),o=n.n(i),l=n("ttbK"),d=n("kwXE"),m=n("gren"),s=n("6mAB"),c=n("tyNb"),p=n("1kSV"),u=n("/n7v"),g=n("3Pt+"),h=n("ofXK"),f=n("Km9j");function S(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275elementStart"](2,"button",19),r["\u0275\u0275text"](3,"Reste"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"input",29,30),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().amountToPay=t}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.amountToPay)}}function v(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275element"](1,"i",34),r["\u0275\u0275text"](2," Solder"),r["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1,"Veuillez Patientez... \xa0"),r["\u0275\u0275elementEnd"]())}function y(e,t){1&e&&r["\u0275\u0275element"](0,"span",35)}function x(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",14),r["\u0275\u0275elementStart"](1,"button",31),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().payBalance()}),r["\u0275\u0275template"](2,v,3,0,"span",32),r["\u0275\u0275template"](3,E,2,0,"span",32),r["\u0275\u0275template"](4,y,1,0,"span",33),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!e.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.show)}}function b(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr",27),r["\u0275\u0275elementStart"](1,"td",36),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",36),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td",36),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"formatMoney"),r["\u0275\u0275elementStart"](11,"small"),r["\u0275\u0275text"](12,"FCFA"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"td",36),r["\u0275\u0275text"](14),r["\u0275\u0275pipe"](15,"formatMoney"),r["\u0275\u0275elementStart"](16,"small"),r["\u0275\u0275text"](17,"FCFA"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"td",36),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"formatMoney"),r["\u0275\u0275elementStart"](21,"small"),r["\u0275\u0275text"](22,"FCFA"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",n+1," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",e.product.product.name," (",e.product.measure_type.name,") "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](7,7,e.quantite)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](10,9,e.p_achat)," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](15,11,e.p_vente)," "),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](20,13,e.p_vente*e.quantite)," ")}}let M=(()=>{class e{constructor(e,t,n,a,i,o){this.saleService=e,this.locStorService=t,this.ngxService=n,this.libraryService=a,this.router=i,this.activeModal=o,this.closed=new r.EventEmitter,this.show=!1,this.isPrinting=!1,this.isVentePdfVisible=!1,this.generatedVentePdf="",this.amountToPay=0,this.isBalancing=!1}ngOnInit(){this.user=this.locStorService.getUser(),this.item.agent=this.user,this.amountToPay=this.item.amount_to_pay-this.item.amount_paid}ngOnChanges(){}getCustomer(e){let t="";return t=null!=e&&null!==e.nom&&null!==e.prenom?e.nom+" "+e.prenom+" ("+e.telephone+")":null!=e&&null!==e.social_reason?e.social_reason+" ("+e.telephone+")":"ANONYME",t}getSeller(e){let t="";return t=null!=e.user&&void 0!==e.user.lastname&&void 0!==e.user.firstname?e.user.lastname+" "+e.user.firstname:"",t}trackByFn(e,t){return t.id}hideForm(){this.closed.emit("closed")}printData(){this.ngxService.start(),this.isPrinting=!0,this.saleService.printSale(this.item).then(e=>{this.ngxService.stop(),this.isPrinting=!1;let t=e.blob(),n=new Blob([t],{type:"application/pdf"});a.saveAs(n,"ISHOWO_DETAIL_VENTE.pdf");var r=URL.createObjectURL(n);window.open(r,"_blank")},e=>{this.ngxService.stop(),this.isPrinting=!1,alert("Une erreur est survenue")})}updateOnPdfClose(e){this.isVentePdfVisible=!1}payBalance(){this.show=!0,this.isBalancing=!0,this.item.amount_paid=parseInt(new String(this.amountToPay).toString())+parseInt(new String(this.item.amount_paid).toString()),this.item.rest_to_pay=this.item.amount_to_pay-this.item.amount_paid,this.item.remainder=this.item.amount_paid-this.item.amount_to_pay,this.saleService.payBalance(this.item).then(e=>{this.amountToPay=0,this.isBalancing=!1,this.show=!1,this.activeModal.close(),this.successSwal()},e=>{this.isBalancing=!1,this.show=!1,this.activeModal.close(),this.errorSwal()})}canShowBalanceBtn(){return null!=this.item&&!(this.item.amount_paid>=this.item.amount_to_pay)}close(){this.activeModal.close()}successSwal(){o.a.fire({customClass:{container:"myCustomSwal"},title:"Mis \xe0 jour de Vente r\xe9ussie!",showConfirmButton:!1,icon:"success",timer:1100,timerProgressBar:!0});let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}errorSwal(){o.a.fire("Echec de l'Enregistrement de le mise \xe0 jour","","error");let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](m.b),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](c.f),r["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-sale-details"]],inputs:{item:"item",subject:"subject"},outputs:{closed:"closed"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:58,vars:14,consts:[[3,"options","customHeader"],[1,"app-card-header"],[1,"font-weight-bold","mb-3"],[1,"text-danger","font-weight-bold"],["role","form"],["userForm","ngForm"],[1,"row"],[1,"form-group","input-group","col-md-4"],[1,"input-group-append"],[1,"btn","btn-info","font-weight-bold","btn-sm"],["type","text","name","customer","disabled","","id","customer",1,"form-control","pl-1",3,"ngModel"],["customer","ngModel"],["type","text","name","seller","disabled","","id","seller",1,"form-control","pl-1",3,"ngModel"],["seller","ngModel"],[1,"form-group","input-group","col-md-2","d-flex","justify-content-end"],[1,"btn","btn-primary","font-weight-bold",3,"click"],[1,"fa","fa-print"],[1,"col-md-2"],[1,"btn","btn-light","float-right",3,"click"],[1,"btn","btn-warning","font-weight-bold","btn-sm"],["type","text","name","amount","disabled","","id","amount",1,"form-control","pr-2","rightnput",3,"ngModel"],["amount","ngModel"],["class","form-group input-group col-md-4",4,"ngIf"],["class","form-group input-group col-md-2 d-flex justify-content-end",4,"ngIf"],[1,"table-responsive","table-bordered"],["id","report-table",1,"table","mb-0"],[1,"thead-light"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],["type","text","name","amount_to_pay","id","amount_to_pay",1,"form-control","pl-1",3,"ngModel","ngModelChange"],["amount_to_pay",""],[1,"btn","btn-success","font-weight-bold",3,"click"],[4,"ngIf"],["class","spinner-border","role","status","style","width: 1.3rem; height: 1.3rem;",4,"ngIf"],[1,"fa","fa-dollar-sign","me-2","ms-n21"],["role","status",1,"spinner-border",2,"width","1.3rem","height","1.3rem"],[1,"align-middle","p-0"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"app-card",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275text"](3,"DETAILS VENTE DU "),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"form",4,5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"button",9),r["\u0275\u0275text"](13,"Client"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"input",10,11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275elementStart"](18,"button",9),r["\u0275\u0275text"](19,"Caissier"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"input",12,13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",14),r["\u0275\u0275elementStart"](23,"button",15),r["\u0275\u0275listener"]("click",function(){return t.printData()}),r["\u0275\u0275element"](24,"span",16),r["\u0275\u0275text"](25," Imprimer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",17),r["\u0275\u0275elementStart"](27,"button",18),r["\u0275\u0275listener"]("click",function(){return t.close()}),r["\u0275\u0275text"](28," Fermer "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](29,"hr"),r["\u0275\u0275elementStart"](30,"div",6),r["\u0275\u0275elementStart"](31,"div",7),r["\u0275\u0275elementStart"](32,"div",8),r["\u0275\u0275elementStart"](33,"button",19),r["\u0275\u0275text"](34,"MONTANT VENTE"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](35,"input",20,21),r["\u0275\u0275pipe"](37,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](38,S,6,1,"div",22),r["\u0275\u0275template"](39,x,5,3,"div",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](40,"div",24),r["\u0275\u0275elementStart"](41,"table",25),r["\u0275\u0275elementStart"](42,"thead",26),r["\u0275\u0275elementStart"](43,"tr",27),r["\u0275\u0275elementStart"](44,"th"),r["\u0275\u0275text"](45,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"th"),r["\u0275\u0275text"](47,"Produit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](48,"th"),r["\u0275\u0275text"](49,"Quantit\xe9"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"th"),r["\u0275\u0275text"](51,"Prix achat"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"th"),r["\u0275\u0275text"](53,"Prix vente"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"th"),r["\u0275\u0275text"](55,"total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"tbody"),r["\u0275\u0275template"](57,b,23,15,"tr",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("options",!1)("customHeader",!0),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](6,9,t.item.date,"dd/MM/yyyy")),r["\u0275\u0275advance"](9),r["\u0275\u0275propertyInterpolate"]("ngModel",t.getCustomer(t.item.customer)),r["\u0275\u0275advance"](6),r["\u0275\u0275propertyInterpolate"]("ngModel",t.getSeller(t.item.agent)),r["\u0275\u0275advance"](15),r["\u0275\u0275propertyInterpolate1"]("ngModel","",r["\u0275\u0275pipeBind1"](37,12,t.item.amount_to_pay)," Fcfa"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.canShowBalanceBtn()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.canShowBalanceBtn()),r["\u0275\u0275advance"](18),r["\u0275\u0275property"]("ngForOf",t.item.lines))},directives:[u.a,g["\u0275angular_packages_forms_forms_y"],g.NgControlStatusGroup,g.NgForm,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,h.l,h.k],pipes:[h.d,f.a],styles:[""]}),e})()},qLKD:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var r=n("fXoL"),a=n("Iab2"),i=(n("QVta"),n("PdH4")),o=n.n(i),l=n("zCCq"),d=n("kwXE"),m=n("gren"),s=n("1kSV"),c=n("6mAB"),p=n("tyNb"),u=n("/n7v"),g=n("3Pt+"),h=n("ofXK"),f=n("Km9j");function S(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275element"](1,"i",35),r["\u0275\u0275text"](2," Solder"),r["\u0275\u0275elementEnd"]())}function v(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1,"Veuillez Patientez... \xa0"),r["\u0275\u0275elementEnd"]())}function E(e,t){1&e&&r["\u0275\u0275element"](0,"span",36)}function y(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275elementStart"](2,"button",30),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().payBalance()}),r["\u0275\u0275template"](3,S,3,0,"span",31),r["\u0275\u0275template"](4,v,2,0,"span",31),r["\u0275\u0275template"](5,E,1,0,"span",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"button",33),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().printData()}),r["\u0275\u0275element"](7,"span",34),r["\u0275\u0275text"](8," Imprimer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!e.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.show),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.show)}}function x(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275elementStart"](1,"button",33),r["\u0275\u0275listener"]("click",function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().printData()}),r["\u0275\u0275element"](2,"span",34),r["\u0275\u0275text"](3," Imprimer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",17),r["\u0275\u0275elementStart"](1,"div",8),r["\u0275\u0275elementStart"](2,"button",18),r["\u0275\u0275text"](3,"Reste"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"input",37,38),r["\u0275\u0275listener"]("ngModelChange",function(t){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().amountToPay=t}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngModel",e.amountToPay)}}function M(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"tr",27),r["\u0275\u0275elementStart"](1,"td",39),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"td"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"td",39),r["\u0275\u0275text"](6),r["\u0275\u0275pipe"](7,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"td",39),r["\u0275\u0275text"](9),r["\u0275\u0275pipe"](10,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"td",39),r["\u0275\u0275text"](12),r["\u0275\u0275pipe"](13,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"td",39),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"td",39),r["\u0275\u0275text"](18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"td",39),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",n+1," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate2"](" ",e.product.product.name," (",e.product.measure_type.name,") "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](7,9,e.quantity)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](10,11,e.purchase_price)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](13,13,e.selling_price)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,15,e.purchase_price*e.quantity)," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",e.barcode," "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind2"](21,17,e.expiration_date,"dd/MM/yyyy")," ")}}let w=(()=>{class e{constructor(e,t,n,a,i,o){this.orderService=e,this.locStorService=t,this.ngxService=n,this.activeModal=a,this.libraryService=i,this.router=o,this.closed=new r.EventEmitter,this.isPrinting=!1,this.show=!1,this.isOrderPdfVisible=!1,this.generatedOrderPdf="",this.amountToPay=0,this.isBalancing=!1}ngOnInit(){this.user=this.locStorService.getUser(),this.item.agent=this.user,this.amountToPay=this.item.amount-this.item.amount_paid}trackByFn(e,t){return t.id}hideForm(){this.closed.emit("closed")}printData(){this.ngxService.start(),this.isPrinting=!0,this.orderService.printOrder(this.item).then(e=>{this.isPrinting=!1;let t=e.blob(),n=new Blob([t],{type:"application/pdf"});this.ngxService.stop(),a.saveAs(n,"ISHOWO_DETAIL_COMMANDE.pdf");var r=URL.createObjectURL(n);window.open(r,"_blank")},e=>{this.ngxService.stop(),this.isPrinting=!1,alert("Une erreur est survenue")})}payBalance(){this.ngxService.start(),this.show=!0,this.isBalancing=!0,this.item.amount_paid=parseInt(new String(this.amountToPay).toString())+parseInt(new String(this.item.amount_paid).toString()),this.orderService.payBalance(this.item).then(e=>{this.ngxService.stop(),this.amountToPay=0,this.isBalancing=!1,this.show=!1,this.activeModal.close(),this.successSwal()},e=>{this.ngxService.stop(),this.show=!1,this.isBalancing=!1,this.activeModal.close(),this.errorSwal()})}canShowBalanceBtn(){return null!=this.item&&!(this.item.amount_paid>=this.item.amount)}updateOnPdfClose(e){this.isOrderPdfVisible=!1}close(){this.activeModal.close()}successSwal(){o.a.fire({customClass:{container:"myCustomSwal"},title:"Mis \xe0 jour de Vente r\xe9ussie!",showConfirmButton:!1,icon:"success",timer:1100,timerProgressBar:!0});let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}errorSwal(){o.a.fire("Echec de l'Enregistrement de le mise \xe0 jour","","error");let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](d.a),r["\u0275\u0275directiveInject"](m.b),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](p.f))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-commande-details"]],inputs:{item:"item",subject:"subject"},outputs:{closed:"closed"},decls:66,vars:18,consts:[[3,"options","customHeader"],[1,"app-card-header"],[1,"font-weight-bold","mb-3"],[1,"text-danger","font-weight-bold"],["role","form"],["userForm","ngForm"],[1,"row"],[1,"form-group","input-group","col-md-3"],[1,"input-group-append"],[1,"btn","btn-info","font-weight-bold","btn-sm"],["type","text","name","supplier","disabled","","id","supplier",1,"form-control","pl-1",3,"ngModel","ngModelChange"],["supplier","ngModel"],["type","text","name","destination","disabled","","id","destination",1,"form-control","pl-1",3,"ngModel","ngModelChange"],["destination","ngModel"],["class","form-group input-group col-md-4 d-flex justify-content-end",4,"ngIf"],[1,"col-md-2"],[1,"btn","btn-light","float-right",3,"click"],[1,"form-group","input-group","col-md-4"],[1,"btn","btn-warning","font-weight-bold","btn-sm"],["type","text","name","amount","disabled","","id","amount",1,"form-control","pr-2","rightnput",3,"ngModel"],["amount","ngModel"],["type","text","name","amount_paid","disabled","","id","amount_paid",1,"form-control","pr-2","rightnput",3,"ngModel"],["amount_paid",""],["class","form-group input-group col-md-4",4,"ngIf"],[1,"table-responsive","table-bordered"],["id","report-table",1,"table","mb-0"],[1,"thead-light"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"form-group","input-group","col-md-4","d-flex","justify-content-end"],[1,"btn","btn-success","font-weight-bold",3,"click"],[4,"ngIf"],["class","spinner-border","role","status","style","width: 1.3rem; height: 1.3rem;",4,"ngIf"],[1,"btn","btn-primary","font-weight-bold",3,"click"],[1,"fa","fa-print"],[1,"fa","fa-dollar-sign","me-2","ms-n21"],["role","status",1,"spinner-border",2,"width","1.3rem","height","1.3rem"],["type","text","name","amount_to_pay","id","amount_to_pay",1,"form-control","pl-1",3,"ngModel","ngModelChange"],["amount_to_pay",""],[1,"align-middle","p-0"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"app-card",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275text"](3,"DETAILS COMMANDE DU "),r["\u0275\u0275elementStart"](4,"span",3),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"form",4,5),r["\u0275\u0275elementStart"](9,"div",6),r["\u0275\u0275elementStart"](10,"div",7),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"button",9),r["\u0275\u0275text"](13,"Fournisseur"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"input",10,11),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.supplier.name=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",7),r["\u0275\u0275elementStart"](17,"div",8),r["\u0275\u0275elementStart"](18,"button",9),r["\u0275\u0275text"](19,"Rayon"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"input",12,13),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.destination.name=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](22,y,9,3,"div",14),r["\u0275\u0275template"](23,x,4,0,"div",14),r["\u0275\u0275elementStart"](24,"div",15),r["\u0275\u0275elementStart"](25,"button",16),r["\u0275\u0275listener"]("click",function(){return t.close()}),r["\u0275\u0275text"](26," Fermer "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](27,"hr"),r["\u0275\u0275elementStart"](28,"div",6),r["\u0275\u0275elementStart"](29,"div",17),r["\u0275\u0275elementStart"](30,"div",8),r["\u0275\u0275elementStart"](31,"button",18),r["\u0275\u0275text"](32,"MONTANT COMMANDE"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](33,"input",19,20),r["\u0275\u0275pipe"](35,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"div",17),r["\u0275\u0275elementStart"](37,"div",8),r["\u0275\u0275elementStart"](38,"button",9),r["\u0275\u0275text"](39,"Mt Pay\xe9"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](40,"input",21,22),r["\u0275\u0275pipe"](42,"formatMoney"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](43,b,6,1,"div",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](44,"div",24),r["\u0275\u0275elementStart"](45,"table",25),r["\u0275\u0275elementStart"](46,"thead",26),r["\u0275\u0275elementStart"](47,"tr",27),r["\u0275\u0275elementStart"](48,"th"),r["\u0275\u0275text"](49,"#"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"th"),r["\u0275\u0275text"](51,"Produit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"th"),r["\u0275\u0275text"](53,"Quantit\xe9"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"th"),r["\u0275\u0275text"](55,"Prix achat"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"th"),r["\u0275\u0275text"](57,"Prix vente"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](58,"th"),r["\u0275\u0275text"](59,"Prix total"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"th"),r["\u0275\u0275text"](61,"Code barre"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](62,"th"),r["\u0275\u0275text"](63,"Date Expiration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](64,"tbody"),r["\u0275\u0275template"](65,M,22,20,"tr",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("options",!1)("customHeader",!0),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](6,11,t.item.date,"dd/MM/yyyy")),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngModel",t.item.supplier.name),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngModel",t.item.destination.name),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.canShowBalanceBtn()),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.canShowBalanceBtn()),r["\u0275\u0275advance"](10),r["\u0275\u0275propertyInterpolate"]("ngModel",r["\u0275\u0275pipeBind1"](35,14,t.item.amount)),r["\u0275\u0275advance"](7),r["\u0275\u0275propertyInterpolate"]("ngModel",r["\u0275\u0275pipeBind1"](42,16,t.item.amount_paid)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.canShowBalanceBtn()),r["\u0275\u0275advance"](22),r["\u0275\u0275property"]("ngForOf",t.item.product_lines))},directives:[u.a,g["\u0275angular_packages_forms_forms_y"],g.NgControlStatusGroup,g.NgForm,g.DefaultValueAccessor,g.NgControlStatus,g.NgModel,h.l,h.k],pipes:[h.d,f.a],styles:[""]}),e})()},"vg+W":function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{constructor(){this.startDate=new Date,this.endDate=new Date}}},wLMa:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}}}]);