(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"+PR4":function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},Iab2:function(e,t,n){var r,a;void 0===(a="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){o(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,i,o){var l=a.URL||a.webkitURL,s=document.createElement("a");s.download=i=i||e.name||"download",s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?r(s):n(s.href)?t(e,i,o):r(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,a,i){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),a);else if(n(e))t(e,a,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){r(o)})}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var l="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&s||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var e=d.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},d.readAsDataURL(e)}else{var m=a.URL||a.webkitURL,p=m.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout(function(){m.revokeObjectURL(p)},4e4)}});a.saveAs=o.saveAs=o,e.exports=o})?r.apply(t,[]):r)||(e.exports=a)},Km9j:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{transform(e,t){var n="";if(null===e||null==e)return e;for(var r=new String(e).split("").reverse().join(""),a=0;a<r.length/3;a++)n+=" "+r.substring(3*a,3*a+3);return new String(n).split("").reverse().join("")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"formatMoney",type:e,pure:!0}),e})()},LsRi:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},SQ0T:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},UeR1:function(e,t,n){"use strict";n.r(t),n.d(t,"ProductsInStockModule",function(){return z});var r=n("ofXK"),a=n("ebz3"),i=n("tyNb"),o=n("fXoL"),l=n("LsRi"),s=n("iHma"),c=n("SQ0T"),d=n("+PR4"),m=n("u8Yb"),p=n("Iab2");class u{}n("QVta");var g=n("PdH4"),h=n.n(g),f=n("TM25"),v=n("kwXE"),S=n("1kSV"),b=n("gren"),E=n("/n7v"),y=n("3Pt+");let w=(()=>{class e{constructor(e,t,n,r,a,i){this.productService=e,this.locStorService=t,this.activeModal=n,this.ngxService=r,this.route=a,this.router=i,this.hidden=new o.EventEmitter,this.visible=!1,this.isSaving=!1,this.isCompleted=!1,this.isSuccess=!1,this.statusMessage="",this.quantity=0}ngOnInit(){this.user=this.locStorService.getUser()}save(){this.isSaving=!0,this.isCompleted=!1,this.statusMessage="",this.item.quantity=this.quantity,this.productService.expandStockView(this.item,this.user).then(e=>{this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!0,this.statusMessage="Stock modifi\xe9 avec succ\xe8s",this.item=new u,this.quantity=0,this.hidden.emit("hidden"),this.activeModal.close(),this.successSwal()},e=>{this.isSaving=!1,this.isCompleted=!0,this.isSuccess=!1,this.statusMessage="Une erreur est survenue. Veuillez r\xe9essayer",this.activeModal.close(),this.errorSwal()})}trackByFn(e,t){return t.id}canExpandStock(){return 1!=(null==this.quantity||""===this.quantity.toString()||0===this.quantity||this.quantity>this.item.quantity)}close(){this.activeModal.close()}successSwal(){h.a.fire({customClass:{container:"myCustomSwal"},title:"Stock modifi\xe9 avec succ\xe8s!",showConfirmButton:!1,icon:"success",timer:1200,timerProgressBar:!0});let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}errorSwal(){h.a.fire("Echec de l'Enregistrement du Transfert","","error");let e=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([e])})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](v.a),o["\u0275\u0275directiveInject"](S.a),o["\u0275\u0275directiveInject"](b.b),o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](i.f))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-stock-view"]],inputs:{item:"item",subject:"subject"},outputs:{hidden:"hidden"},decls:54,vars:12,consts:[[3,"options","customHeader"],[1,"app-card-header"],[1,"col-md-12"],[1,"lead"],[1,"lead","text-primary","font-weight-bold"],[1,"row","mb-3"],[1,"form-group","mb-0","input-group","col-md-12","d-flex","justify-content-end"],[1,"input-group-append"],[1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-save"],[1,"btn","btn-light",3,"click"],[1,"fa","fa-chevron-circle-left"],[1,"row","mt-2"],[1,"form-group","col-sm-3"],["for","",1,"DetailTitle"],["type","text","disabled","","name","product","placeholder","",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["type","text","disabled","","name","category","placeholder","",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["type","text","disabled","","name","measure_type","placeholder","",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["type","text","disabled","","name","compartment","placeholder","",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["type","number","disabled","","name","apurchase_p","placeholder","Prix d'achat",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["purchase_p",""],["type","number","disabled","","name","aselling_p","placeholder","Prix de vente",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["selling_p",""],[1,"form-group","col-sm-2"],["type","number","disabled","","maxlength","5","name","aquant","placeholder","Quantit\xe9",1,"form-control","pl-2",3,"ngModel","ngModelChange"],["quant",""],[1,"form-group","col-sm-4"],["type","number","maxlength","5","name","aquantite","placeholder","Quantit\xe9",1,"form-control","pl-2",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"app-card",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"span",3),o["\u0275\u0275text"](4,"Mise en D\xe9tail du Produit : "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",4),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275elementStart"](10,"button",8),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275element"](11,"span",9),o["\u0275\u0275text"](12," Enregistrer"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",10),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275element"](14,"span",11),o["\u0275\u0275text"](15," Retour"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",12),o["\u0275\u0275elementStart"](17,"div",13),o["\u0275\u0275elementStart"](18,"label",14),o["\u0275\u0275text"](19," NOM DU PRODUIT"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"input",15),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.product.product.name=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",13),o["\u0275\u0275elementStart"](22,"label",14),o["\u0275\u0275text"](23," CAT\xc9GORIE"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"input",16),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.product.product.category.name=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",13),o["\u0275\u0275elementStart"](26,"label",14),o["\u0275\u0275text"](27," TYPE DE MESURE"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"input",17),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.product.measure_type.name=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",13),o["\u0275\u0275elementStart"](30,"label",14),o["\u0275\u0275text"](31," RAYON"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"input",18),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.compartment.name=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"div",12),o["\u0275\u0275elementStart"](34,"div",13),o["\u0275\u0275elementStart"](35,"label",14),o["\u0275\u0275text"](36," PRIX D'ACHAT"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"input",19,20),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.purchase_price=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"div",13),o["\u0275\u0275elementStart"](40,"label",14),o["\u0275\u0275text"](41," PRIX DE VENTE"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"input",21,22),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.selling_price=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"div",23),o["\u0275\u0275elementStart"](45,"label",14),o["\u0275\u0275text"](46," STOCK ACTUEL"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"input",24,25),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.item.quantity=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",26),o["\u0275\u0275elementStart"](50,"label",14),o["\u0275\u0275text"](51," QUANTIT\xc9 DU GROS \xc0 METTRE EN D\xc9TAIL"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](52,"input",27,25),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.quantity=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("options",!1)("customHeader",!0),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](t.item.product.product.name),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",!t.canExpandStock()),o["\u0275\u0275advance"](10),o["\u0275\u0275property"]("ngModel",t.item.product.product.name),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.item.product.product.category.name),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.item.product.measure_type.name),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngModel",t.item.compartment.name),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.item.purchase_price),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.item.selling_price),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.item.quantity),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.quantity))},directives:[E.a,y.DefaultValueAccessor,y.NgControlStatus,y.NgModel,y.NumberValueAccessor,y.MaxLengthValidator],styles:[""]}),e})();var x=n("c4Tr"),M=n("hmux"),k=n("2IxJ"),C=n("EqsU"),I=n("h8t+"),V=n("vohr"),j=n("Km9j");function _(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",27),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",27),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function T(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",27),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function O(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"option",27),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("ngValue",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function P(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275elementStart"](1,"div",29),o["\u0275\u0275elementStart"](2,"div",30),o["\u0275\u0275elementStart"](3,"div",31),o["\u0275\u0275element"](4,"img",32),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"p",33),o["\u0275\u0275text"](6,"Veuillez Patientez..."),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function R(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275elementStart"](1,"div",29),o["\u0275\u0275elementStart"](2,"div",30),o["\u0275\u0275elementStart"](3,"div",31),o["\u0275\u0275element"](4,"img",34),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"p",33),o["\u0275\u0275text"](6,"Aucun r\xe9sultat trouv\xe9 !"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function A(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"tr",43),o["\u0275\u0275elementStart"](1,"td",44),o["\u0275\u0275elementStart"](2,"div",45),o["\u0275\u0275elementStart"](3,"strong"),o["\u0275\u0275text"](4," Affichage du stock des produits en cours "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]())}function U(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"tr",38),o["\u0275\u0275elementStart"](1,"td",46),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"td"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"td",39),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"td"),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"td"),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"td",47),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"formatMoney"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"td",47),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"formatMoney"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"td",48),o["\u0275\u0275text"](18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"td",49),o["\u0275\u0275elementStart"](20,"a",50),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).ViewProduct(n)}),o["\u0275\u0275element"](21,"i",51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"a",52),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const n=t.$implicit;return o["\u0275\u0275nextContext"](2).expandProduct(n)}),o["\u0275\u0275element"](23,"i",53),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=t.index;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",n+1," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.barcode),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.product.product.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.product.product.category.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.product.measure_type.name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,10,e.purchase_price)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,12,e.selling_price)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.quantity),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("placement","top"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("placement","top")}}const q=function(e,t,n,r,a,i,o){return[e,t,n,r,a,i,o]};function D(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",35),o["\u0275\u0275elementStart"](1,"table",36),o["\u0275\u0275elementStart"](2,"thead",37),o["\u0275\u0275elementStart"](3,"tr",38),o["\u0275\u0275elementStart"](4,"th"),o["\u0275\u0275text"](5,"#"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"th"),o["\u0275\u0275text"](7,"R\xe9f\xe9rence"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"th",39),o["\u0275\u0275text"](9,"Produit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"th"),o["\u0275\u0275text"](11,"Cat\xe9gorie"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"th"),o["\u0275\u0275text"](13,"U.Mesure"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"th"),o["\u0275\u0275text"](15,"P.Achat "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"th"),o["\u0275\u0275text"](17,"P.Vente "),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"th",38),o["\u0275\u0275text"](19,"Stock actuel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"th"),o["\u0275\u0275text"](21,"Actions"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"tbody"),o["\u0275\u0275template"](23,A,5,0,"tr",40),o["\u0275\u0275template"](24,U,24,14,"tr",41),o["\u0275\u0275pipe"](25,"slice"),o["\u0275\u0275pipe"](26,"stockView"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"ngb-pagination",42),o["\u0275\u0275listener"]("pageChange",function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().page=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](23),o["\u0275\u0275property"]("ngIf",e.isLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind3"](25,9,o["\u0275\u0275pipeBindV"](26,13,o["\u0275\u0275pureFunction7"](21,q,e.stock_view,e.param.product,e.param.category.id,e.param.measure_type.id,e.param.location.id,e.param.agency.id,e.param.codebarre)),(e.page-1)*e.pageSize,e.page*e.pageSize)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("collectionSize",e.stock_view.length)("page",e.page)("pageSize",e.pageSize)("maxSize",5)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)}}const F=function(){return["/stocks/main"]},B=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a,i,l,s,c){this.productService=e,this.categoryService=t,this.measureTypeService=n,this.compartmentService=r,this.agencyService=a,this.locStorService=i,this.modalService=l,this.ngxService=s,this.router=c,this.visible=!0,this.isSaving=!1,this.isCompleted=!1,this.isSuccess=!1,this.statusMessage="",this.created=new o.EventEmitter,this.stock_view=[],this.page=1,this.pageSize=30,this.isCreateVisible=!1,this.isLoading=!1,this.isPrinting=!1,this.isStockViewPdfVisible=!1,this.generatedStockViewPdf="",this.param=new m.a,this.pageStartIndex=0,this.limitTable=[],this.pageLimit=0}ngOnInit(){this.user=this.locStorService.getUser(),this.getStockView(),this.getCategories(),this.getMeasureTypes(),this.getCompartments(),this.getAgencies(),this.param=new m.a}ngOnChanges(){this.user=this.locStorService.getUser(),this.param=new m.a}getStockView(){this.isLoading=!0,this.stock_view=[],this.productService.getStockView(this.user).then(e=>{this.isLoading=!1,this.noData=0===e.length,this.stock_view=e},e=>{this.isLoading=!1})}searchStockView(){this.isLoading=!0,this.stock_view=[],this.productService.searchStockView(this.user,{product_name:this.param.product,product_code:this.param.codebarre,id_profile:0}).then(e=>{this.isLoading=!1,this.noData=0===e.length,this.stock_view=e},e=>{this.isLoading=!1})}printData(){this.ngxService.start(),this.isPrinting=!0,this.productService.printStockView(this.user).then(e=>{this.isPrinting=!1;let t=e.blob(),n=new Blob([t],{type:"application/pdf"});p.saveAs(n,"ISHOWO_STOCK.pdf");var r=URL.createObjectURL(n);this.ngxService.stop(),window.open(r,"_blank")},e=>{this.isPrinting=!1,this.ngxService.stop()})}updateOnPdfClose(e){this.isStockViewPdfVisible=e}trackByFn(e,t){return t.id}hideViewForm(){this.router.navigate(["/app/orders_main"])}viewDetails(e){this.selectedUpObject=e}expandProduct(e){this.selectedExpdObject=e,this.modalService.open(w,{size:"xl"}).componentInstance.item=e}ViewProduct(e){this.selectedExpdObject=e,this.modalService.open(x.a,{size:"xl"}).componentInstance.item=e}updateOnClose(e){this.selectedUpObject=null,this.searchStockView()}updateOnHide(e){this.selectedExpdObject=null,this.searchStockView()}getCategories(){this.categories=[],this.categoryService.getCategories(this.user).then(e=>{let t=new s.a;t.id=0,t.name="Toutes",this.categories.push(t),null!==e&&e.filter(e=>this.categories.push(e))},e=>{})}getMeasureTypes(){this.measureTypes=[],this.measureTypeService.getMeasureTypes(this.user).then(e=>{let t=new d.a;t.id=0,t.name="Tous",this.measureTypes.push(t),e.filter(e=>this.measureTypes.push(e))},e=>{})}getCompartments(){this.compartments=[],this.compartmentService.getCompartments(this.user).then(e=>{let t=new c.a;t.id=0,t.name="Tous",this.compartments.push(t),null!==e&&e.filter(e=>this.compartments.push(e))},e=>{})}getAgencies(){this.agencies=[],this.agencyService.getAgencies(this.user).then(e=>{let t=new l.a;t.id=0,t.name="Toutes",this.agencies.push(t),null!==e&&e.filter(e=>this.agencies.push(e))},e=>{})}paginate(e){this.pageStartIndex=e.first,this.pageLimit=e.rows}getStockValueOnSellingPrice(e){if(0===e.length)return 0;let t=0;return t=e.map(e=>e.quantity*e.selling_price).reduce((e,t)=>e+t),t}getStockValueOnPurchasePrice(e){if(0===e.length)return 0;let t=0;return t=e.map(e=>e.quantity*e.purchase_price).reduce((e,t)=>e+t),t}getStockValueOnRevenue(e){if(0===e.length)return 0;let t=0;return t=e.map(e=>e.quantity*(e.selling_price-e.purchase_price)).reduce((e,t)=>e+t),t}updateOnClosed(e){this.visible=!0}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](f.a),o["\u0275\u0275directiveInject"](M.a),o["\u0275\u0275directiveInject"](k.a),o["\u0275\u0275directiveInject"](C.a),o["\u0275\u0275directiveInject"](I.a),o["\u0275\u0275directiveInject"](v.a),o["\u0275\u0275directiveInject"](S.j),o["\u0275\u0275directiveInject"](b.b),o["\u0275\u0275directiveInject"](i.f))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-product-stock-list"]],inputs:{subject:"subject"},outputs:{created:"created"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:57,vars:17,consts:[[3,"options","customHeader"],[1,"app-card-header"],["role","form"],["userForm","ngForm"],[1,"row"],[1,"form-group","mb-0","input-group","col-sm-3"],[1,"input-group-append"],[1,"btn","btn-secondary","font-weight-bold","btn-sm"],["name","cat_prod",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","mb-0","input-group","col-sm-2"],["name","measure_type",1,"form-control",3,"ngModel","ngModelChange"],["name","location",1,"form-control",3,"ngModel","ngModelChange"],["name","agency",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-search"],[1,"btn","btn-light",3,"routerLink"],[1,"fa","fa-chevron-circle-left"],[1,"form-group","mb-0","input-group","col-sm-5"],[1,"btn","btn-info","font-weight-bold","btn-sm"],["type","text","maxlength","30","name","product","placeholder","Nom du produit",1,"form-control","pl-2",3,"ngModel","ngModelChange","keydown.enter"],["type","text","maxlength","30","name","barcode","placeholder","Code barre du produit",1,"form-control","pl-2",3,"ngModel","ngModelChange","keydown.enter"],[1,"form-group","mb-0","col-sm-2","d-flex","justify-content-end"],[1,"btn","btn-info","font-weight-bold","btn-sm",3,"click"],[1,"fa","fa-print"],["class","row d-flex justify-content-center mb-5","style","margin-bottom: 10em;",4,"ngIf"],["class","table-responsive table-bordered table-hover",4,"ngIf"],[3,"ngValue"],[1,"row","d-flex","justify-content-center","mb-5",2,"margin-bottom","10em"],[1,"col-md-12","text-center","p-0"],[1,"p-20","pb-3"],[1,"risk-rate"],["src","assets/images/params/spinner.gif","alt","","width","15%"],[1,"text-muted","h3","mb-5"],["src","assets/images/params/liste_vide.png","alt","","width","15%"],[1,"table-responsive","table-bordered","table-hover"],["id","report-table",1,"table","mb-0"],[1,"thead-light"],[1,"text-center"],[1,"text-left"],["class","",4,"ngIf"],["class","text-center",4,"ngFor","ngForOf"],[1,"float-right","mt-2",3,"collectionSize","page","pageSize","maxSize","rotate","ellipses","boundaryLinks","pageChange"],[1,""],["colspan","13"],[1,"text-center","alert-info"],[1,"align-middle","p-0"],[1,"font-weight-bold"],[1,"text-center","font-weight-bold","text-danger"],[1,"align-middle","p-0","pt-1","pb-1"],["ngbTooltip","Voir Plus",1,"btn","btn-icon","btn-outline-info","mr-1",3,"placement","click"],[1,"fa","fa-folder-open"],["ngbTooltip","Mettre en D\xe9tail",1,"btn","btn-icon","btn-outline-success",3,"placement","click"],[1,"fa","fa-expand-arrows-alt","p-0"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"app-card",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"form",2,3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"div",6),o["\u0275\u0275elementStart"](7,"button",7),o["\u0275\u0275text"](8,"Cat\xe9gorie"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"select",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.category=e}),o["\u0275\u0275template"](10,_,2,2,"option",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",10),o["\u0275\u0275elementStart"](12,"div",6),o["\u0275\u0275elementStart"](13,"button",7),o["\u0275\u0275text"](14,"T.Mesure"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"select",11),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.measure_type=e}),o["\u0275\u0275template"](16,L,2,2,"option",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",10),o["\u0275\u0275elementStart"](18,"div",6),o["\u0275\u0275elementStart"](19,"button",7),o["\u0275\u0275text"](20,"Rayon"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"select",12),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.location=e}),o["\u0275\u0275template"](22,T,2,2,"option",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",10),o["\u0275\u0275elementStart"](24,"div",6),o["\u0275\u0275elementStart"](25,"button",7),o["\u0275\u0275text"](26,"Agence"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"select",13),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.agency=e}),o["\u0275\u0275template"](28,O,2,2,"option",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",5),o["\u0275\u0275elementStart"](30,"div",6),o["\u0275\u0275elementStart"](31,"button",14),o["\u0275\u0275listener"]("click",function(){return t.searchStockView()}),o["\u0275\u0275element"](32,"span",15),o["\u0275\u0275text"](33," Rechercher"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"button",16),o["\u0275\u0275element"](35,"span",17),o["\u0275\u0275text"](36," Retour"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](37,"hr"),o["\u0275\u0275elementStart"](38,"div",4),o["\u0275\u0275elementStart"](39,"div",18),o["\u0275\u0275elementStart"](40,"div",6),o["\u0275\u0275elementStart"](41,"button",19),o["\u0275\u0275text"](42,"Produit"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"input",20),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.product=e})("keydown.enter",function(){return t.searchStockView()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"div",18),o["\u0275\u0275elementStart"](45,"div",6),o["\u0275\u0275elementStart"](46,"button",19),o["\u0275\u0275text"](47,"Code Barre"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"input",21),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.param.codebarre=e})("keydown.enter",function(){return t.searchStockView()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",22),o["\u0275\u0275elementStart"](50,"div",6),o["\u0275\u0275elementStart"](51,"button",23),o["\u0275\u0275listener"]("click",function(){return t.printData()}),o["\u0275\u0275element"](52,"span",24),o["\u0275\u0275text"](53," IMPRIMER TOUT"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](54,P,7,0,"div",25),o["\u0275\u0275template"](55,R,7,0,"div",25),o["\u0275\u0275template"](56,D,28,29,"div",26),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("options",!1)("customHeader",!0),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("ngModel",t.param.category),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.categories),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.param.measure_type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.measureTypes),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.param.location),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.compartments),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.param.agency),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.agencies),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction0"](16,F)),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("ngModel",t.param.product),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngModel",t.param.codebarre),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngIf",t.isLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.noData&&!t.isLoading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isLoading&&!t.noData))},directives:[E.a,y["\u0275angular_packages_forms_forms_y"],y.NgControlStatusGroup,y.NgForm,y.SelectControlValueAccessor,y.NgControlStatus,y.NgModel,r.k,i.g,y.DefaultValueAccessor,y.MaxLengthValidator,r.l,y.NgSelectOption,y["\u0275angular_packages_forms_forms_x"],S.m,S.t],pipes:[r.r,V.a,j.a],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.j.forChild(B)],i.j]}),e})(),z=(()=>{class e{}return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.b,N,a.a]]}),e})()},iHma:function(e,t,n){"use strict";n.d(t,"a",function(){return r});class r{}},u8Yb:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("SQ0T"),a=n("iHma"),i=n("+PR4"),o=n("LsRi");class l{constructor(){this.product="",this.location=new r.a,this.agency=new o.a,this.category=new a.a,this.measure_type=new i.a,this.codebarre="",this.source=new r.a,this.destination=new r.a}}},vohr:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("fXoL");let a=(()=>{class e{transform(e,t,n,r,a,i,o){if(!e||!(t||n||r||a||i||o))return e;let l=e.filter(e=>!(!(e.product.product.name.toLowerCase().indexOf(t.toLowerCase())>=0)||void 0!==n&&0!==n&&e.product.product.category.id!==n||void 0!==r&&0!==r&&e.product.measure_type.id!==r||void 0!==a&&0!==a&&e.compartment.id!==a||void 0!==i&&0!==i&&e.compartment.agency.id!==i||!(void 0===o||""===o||e.barcode.toLowerCase().indexOf(o.toLowerCase())>=0)));return null===l&&(l=[]),l}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r["\u0275\u0275definePipe"]({name:"stockView",type:e,pure:!0}),e})()}}]);